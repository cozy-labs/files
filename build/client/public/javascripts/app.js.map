{"version":3,"file":"/home/frankrousseau/mycloud/products/standalone/files/build/client/public/javascripts/app.js","sources":["app/application.coffee","app/collections/files.coffee","app/collections/upload_queue.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/client.coffee","app/lib/folder_helpers.coffee","app/lib/merged_collection.coffee","app/lib/socket.coffee","app/lib/view_collection.coffee","app/locales/en.coffee","app/locales/fr.coffee","app/locales/ro.coffee","app/models/file.coffee","app/router.coffee","app/views/breadcrumbs.coffee","app/views/file.coffee","app/views/files.coffee","app/views/folder.coffee","app/views/modal.coffee","app/views/modal_bulk_move.coffee","app/views/modal_share.coffee","app/views/public_folder.coffee","app/views/templates/breadcrumbs_element.jade","app/views/templates/file.jade","app/views/templates/file_edit.jade","app/views/templates/file_search.jade","app/views/templates/files.jade","app/views/templates/folder.jade","app/views/templates/modal.jade","app/views/templates/modal_folder.jade","app/views/templates/progressbar.jade","app/views/templates/upload_status.jade","app/views/upload_status.coffee","app/views/uploaded_file_view.coffee","app/widgets/autocomplete.coffee","app/widgets/progressbar.coffee","app/widgets/tags.coffee"],"names":[],"mappings":"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,CAAC,0BAAZ,GAAyC,IAAzC;AAAA,MACA,IAAC,EAAD,CAAG,gBAAH,CAAoB,CAAC,IAArB,CAA0B,QAA1B,CADA;AAAA,MAEA,IAAC,EAAD,CAAG,gBAAH,CAAoB,CAAC,IAArB,CAA0B,MAA1B,CAFA;aAGA,MAAM,CAAC,GAAP,CAAW,GAAX,EAAgB;AAAA,4BAAoB,IAApB;OAAhB,EAA0C;eAAA,SAAC,GAAD;AACtC,eAAC,EAAD,CAAG,gBAAH,CAAoB,CAAC,IAArB,CAA0B,KAA1B;AACA,cAAO,WAAP;AACI,iBAAC,EAAD,CAAG,gBAAH,CAAoB,CAAC,IAArB,CAA0B,EAAE,uBAAF,CAA1B;mBACA,KAAC,EAAD,CAAG,gBAAH,CAAoB,CAAC,QAArB,CAA8B,SAA9B,EAFJ;WAFsC;QAAA;MAAA,QAA1C,EAbJ;KAPyB;EAAA,CAvB7B;;0BAAA;;GAF4C,WAHhD;;;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9FA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnEA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9FA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","sourcesContent":["FileCollection = require './collections/files'\nUploadQueue = require './collections/upload_queue'\nFile = require './models/file'\nSocketListener = require '../lib/socket'\nFolderView = require './views/folder'\n\n###\nInitialize the model and start the actual code\n###\nmodule.exports =\n\n    initialize: ->\n\n        # if the application is browsed by a guest or not\n        # we use that in various places of the application (as few as possible)\n        @isPublic = window.location.pathname.indexOf('/public/') is 0\n\n        # the base collection holds all the files and folders of the application\n        @baseCollection = new FileCollection()\n\n        # queue to allow new uploads while uploading\n        @uploadQueue = new UploadQueue()\n\n        @socket = new SocketListener()\n        @socket.watch @baseCollection\n\n        Router = require 'router'\n        @router = new Router()\n\n        # Generate the root folder\n        # In shared area there are more properties because the root is an actual folder\n        if window.rootFolder?\n            @root = new File window.rootFolder\n            @root.canUpload = window.canUpload or false\n            @root.publicNotificationsEnabled = window.publicNofications or false\n            @root.publicKey = window.publicKey or \"\"\n        else\n            # Fake folder to describe the root\n            @root = new File\n                id: \"root\"\n                path: \"\"\n                name: t 'root folder name'\n                type: \"folder\"\n        @baseCollection.add @root\n\n        # for easy debugging in browser (and dirty tricks)\n        window.app = @\n\n        Backbone.history.start()\n\n        # Makes this object immuable.\n        Object.freeze this if typeof Object.freeze is 'function'\n","File = require '../models/file'\n\n###\nRepresents a collection of files\nIt acts as the cache when instantiate as the baseCollection\nThe base collection holds ALL the files and folders of the application\nIt creates projections (subcollection) that will be consumed by folder views.\nThose projections represents one folder.\n###\nmodule.exports = class FileCollection extends Backbone.Collection\n\n    # Model that will be contained inside the collection.\n    model: File\n\n    # This is where ajax requests the backend.\n    url: 'files'\n\n    cachedPaths: []\n\n    isPathCached: (path) -> @cachedPaths.indexOf(path) isnt -1\n\n    ###\n        Retrieves folder's information (meta data)\n        * from memory if it's cached\n        * otherwise, from server\n    ###\n    getFolderInfo: (folderID, callback) ->\n        folder = @get folderID\n        unless folder?\n            #console.log \"fetch folder info\"\n            folder = new File id: folderID, type: \"folder\"\n            folder.fetch\n                success: =>\n                    @add folder\n                    callback null, folder\n                error: (xhr, resp) ->\n                    callback status: resp.status, msg: resp.statusText\n        else\n            #console.log \"[cache] fetch folder info\"\n            callback null, folder\n\n    # Retrieves folder's content (files and folders in it)\n    getFolderContent: (folder, callback = ->) ->\n        #console.log \"fetch folder content\"\n        path = folder.getRepository()\n        folder.fetchContent (err, content, parents) =>\n            if err?\n                callback err\n            else\n                # adds the new models (updates them if already in collection)\n                @set content, remove: false\n\n                # we handle deletion manually because\n                # they must be based on  projection, not baseCollection\n                contentIDs = _.pluck content, 'id'\n                path = folder.getRepository()\n                itemsToRemove = @getSubCollection(path).filter (item) ->\n                    return item.get('id') not in contentIDs\n                @remove itemsToRemove\n\n                # we mark as cached the folder if it's the first time we load\n                # its content\n                @cachedPaths.push path unless @isPathCached path\n                callback()\n\n    ###\n        Global method to retrieve folder's info and content\n        and create a subcollection (projection) based on the current collection\n    ###\n    getByFolder: (folderID, callback) ->\n        @getFolderInfo folderID, (err, folder) =>\n            if err? then callback err\n            else\n                path = folder.getRepository()\n                filter = (file) ->\n                    file.get('path') is path and not file.isRoot()\n\n                collection = new BackboneProjections.Filtered @,\n                                    filter: filter\n                                    comparator: @comparator\n\n                if @isPathCached path\n                    #console.log \"[cache] fetch folder content\"\n                    callback null, folder, collection\n                else\n                    # we retrieve at the same time the folder's content\n                    # and the folder's breadcrumb\n                    @getFolderContent folder, ->\n                        callback null, folder, collection\n\n    existingPaths: ->\n        @map (model) -> model.getRepository()\n\n    # Creates a sub collection (projection) based on the current collection\n    getSubCollection: (path) ->\n        filter = (file) ->\n            return file.get('path') is path and not file.isRoot()\n        return new BackboneProjections.Filtered @,\n                            filter: filter\n                            comparator: @comparator\n\n    comparator: (f1, f2) ->\n\n        # default values\n        @type = 'name' unless @type?\n        @order = 'asc' unless @order?\n\n        t1 = f1.get 'type'\n        t2 = f2.get 'type'\n\n        # new folders should be at the topmost\n        if f1.isFolder() and not f2.isFolder() and f1.isNew() then return -1\n        if f2.isFolder() and not f1.isFolder() and f2.isNew() then return 1\n\n        if @type is 'name'\n            n1 = f1.get('name').toLocaleLowerCase()\n            n2 = f2.get('name').toLocaleLowerCase()\n        else if @type is \"lastModification\"\n            n1 = new Date(f1.get 'lastModification').getTime()\n            n2 = new Date(f2.get 'lastModification').getTime()\n        else\n            n1 = f1.get @type\n            n2 = f2.get @type\n\n        sort = if @order is 'asc' then -1 else 1\n\n        if t1 is t2\n            if @type is 'class' and n1 is n2\n\n                # Sort by name if the class is the same\n                n1 = f1.get('name').toLocaleLowerCase()\n                n2 = f2.get('name').toLocaleLowerCase()\n\n                # Get both file extensions\n                e1 = n1.split('.').pop()\n                e2 = n2.split('.').pop()\n\n                if e1 isnt e2\n                    # Sort by file extension if they are different\n                    if e1 > e2 then return -sort\n                    if e1 < e2 then return sort\n                    return 0\n\n            # Sort normally\n            if n1 > n2 then return -sort\n            else if n1 < n2 then return sort\n            else return 0\n\n        else if t1 is 'file' and t2 is 'folder'\n            return 1\n        else # t1 is 'folder' and t2 is 'file'\n            return -1\n","File = require '../models/file'\nHelpers = require '../lib/folder_helpers'\n\n# the uploadQueue is a mix of async.queue & BackoneCollection\n# blobs are added to the queue & to the collection\n# on upload success, File Models are marked as loaded\n# on\n\nmodule.exports = class UploadQueue extends Backbone.Collection\n\n    # number of files actually loaded\n    loaded: 0\n\n    # list of paths where files are being uploaded\n    uploadingPaths: {}\n\n    initialize: ->\n        @asyncQueue = async.queue @uploadWorker, 5\n\n        # when a model is added, we queue it for upload\n        @listenTo this, 'add', (model) =>\n            @completed = false\n            # Files at the bottom, Folder at the top\n            if model.get('type') is 'file' then @asyncQueue.push model\n            else if model.get('type') is 'folder' then @asyncQueue.unshift model\n            else throw new Error('adding wrong typed model to upload queue')\n\n        # never happens, but should be handled\n        @listenTo this, 'remove', (model) =>\n            model.error = 'aborted'\n\n        # when an upload completes or fails, we keep counts\n        @listenTo this, 'sync error', (model) =>\n            path = model.get('path') + '/'\n            @uploadingPaths[path]--\n            @loaded++\n\n        # proxy progress events, throttled to every 100ms\n        @listenTo this, 'progress', _.throttle =>\n            @trigger 'upload-progress', @computeProgress()\n        , 100\n\n        # when the queue is totally completed\n        @asyncQueue.drain = =>\n            @completed = true\n            @trigger 'upload-complete'\n\n    add: ->\n        @reset() if @completed\n        super\n\n    reset: (models, options) ->\n        @loaded = 0\n        @completed = false\n        @uploadingPaths = {}\n        super\n\n    computeProgress: =>\n        return @progress =\n            loadedFiles: @loaded\n            totalFiles: @length\n            loadedBytes: @sumProp 'loaded'\n            totalBytes: @sumProp 'total'\n\n    sumProp: (prop) =>\n        iter = (sum, model) -> sum + model[prop]\n        @reduce iter, 0\n\n    uploadWorker: (model, cb) =>\n        if model.existing or model.error or model.isUploaded\n            setTimeout cb, 10\n\n        model.save null,\n            success: ->\n                model.file = null\n                model.isUploaded = true\n                model.loaded = model.total\n                unless app.baseCollection.get model.id\n                    app.baseCollection.add model\n                cb null\n            error: (_, err) =>\n                body = try JSON.parse(err.responseText)\n                catch e then msg: null\n\n                if err.status is 400 and body.code is 'EEXISTS'\n                    model.existing = true\n                    return cb new Error body.msg\n\n                if err.status is 400 and body.code is 'ESTORAGE'\n                    model.error = new Error body.msg\n                    return cb model.error\n\n                model.tries = 1 + (model.tries or 0)\n                if model.tries > 3\n                    model.error = t err.msg or \"modal error file upload\"\n                else\n                    # let's try again\n                    @asyncQueue.push model\n                cb err\n\n    addBlobs: (blobs, folder) ->\n\n        i = 0\n        existingPaths = app.baseCollection.existingPaths()\n        # we do a non blocking loop, handling one file every 2ms so the\n        # UI don't get stuck\n        do nonBlockingLoop = =>\n            return unless blob = blobs[i++]\n\n            path = folder.getRepository() or ''\n            relPath = blob.relativePath or\n                blob.mozRelativePath or\n                blob.webkitRelativePath or\n                blob.msRelativePath\n\n            if relPath then path += '/' + Helpers.dirName relPath\n\n            model = new File\n                type: 'file'\n                class: 'document'\n                size: blob.size\n                name: blob.name\n                path: path\n                lastModification: blob.lastModifiedDate\n\n            if model.getRepository() in existingPaths\n                model.existing = true\n            else\n                model.file = blob\n                model.loaded = 0\n                model.total = blob.size\n\n            @add model\n            @markAsBeingUploaded model\n\n            setTimeout nonBlockingLoop, 2\n\n    addFolderBlobs: (blobs, parent) ->\n\n        dirs = Helpers.nestedDirs blobs\n        i = 0\n        #console.log dirs\n        do nonBlockingLoop = =>\n\n            # if no more folders to add, leave the loop\n            unless dir = dirs[i++]\n                # folders will be created\n                # we can safely add files to bottom of queue\n                blobs = _.filter blobs, (blob) ->\n                    blob.name not in ['.', '..']\n                @addBlobs blobs, parent\n                return\n\n            prefix = parent.getRepository()\n            parts = dir.split('/').filter (x) -> x # ?remove empty last part\n            name = parts[parts.length - 1]\n            path = [prefix].concat(parts[...-1]).join '/'\n\n            folder = new File\n                type: \"folder\"\n                name: name\n                path: path\n\n            folder.loaded = 0\n            folder.total = 250 # ~ size of the query\n\n            # add folder to be saved\n            @add folder\n            @markAsBeingUploaded folder\n\n            setTimeout nonBlockingLoop, 2\n\n    filteredByFolder: (folder, comparator) ->\n        filteredUploads = new BackboneProjections.Filtered this,\n            filter: (file) ->\n                return file.get('path') is folder.getRepository() and\n                    not file.isUploaded\n\n            comparator: comparator\n\n    getResults: ->\n        error = []\n        existing = []\n        success = 0\n\n        @each (model) ->\n            if model.error\n                console.log \"Upload Error\", model.getRepository(), model.error\n                error.push model\n            else if model.existing then existing.push model\n            else success++\n\n        status = if error.length then 'error'\n        else if existing.length then 'warning'\n        else 'success'\n\n        return {status, error, existing, success}\n\n    # we keep track of models being uploaded by path\n    markAsBeingUploaded: (model) ->\n        # appending a / prevents conflict with elements\n        # having the same prefix in their names\n        path = model.get('path') + '/'\n        unless @uploadingPaths[path]?\n            @uploadingPaths[path] = 0\n\n        @uploadingPaths[path]++\n\n    # returns the number of children elements being uploading for a given path\n    getNumUploadingElementsByPath: (path) ->\n        # appending a / prevents conflict with elements\n        # having the same prefix in their names\n        path = path + '/'\n\n        return _.reduce @uploadingPaths, (memo, value, index) ->\n            if index.indexOf(path) isnt -1 or path is ''\n                return memo + value\n            else\n                return memo\n        , 0\n","app = require 'application'\n\n$ ->\n    jQuery.event.props.push 'dataTransfer'\n\n    locale = window.locale or \"en\" # default locale\n    moment.lang locale\n\n    locales = {}\n    try\n        locales = require \"locales/#{locale}\"\n    catch err\n        locales = require \"locales/en\"\n\n    polyglot = new Polyglot()\n\n    # we give polyglot the data\n    polyglot.extend locales\n\n    # handy shortcut\n    window.t = polyglot.t.bind polyglot\n\n    # launch the app\n    app.initialize()\n","(() ->\n    # IIFE to avoid collisions with other variables\n    (->\n        # Make it safe to do console.log() always.\n        console = window.console = window.console or {}\n        method = undefined\n        dummy = ->\n        methods = ('assert,count,debug,dir,dirxml,error,exception,\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\n                   profile,profileEnd,time,timeEnd,trace,warn').split ','\n\n        console[method] = console[method] or dummy while method = methods.pop()\n    )()\n)()\n","module.exports = class BaseView extends Backbone.View\n\n    template: ->\n\n    initialize: ->\n\n    getRenderData: ->\n        model: @model?.toJSON()\n\n    render: ->\n        @beforeRender()\n        @$el.html @template @getRenderData()\n        @afterRender()\n        @\n\n    beforeRender: ->\n\n    afterRender: ->\n\n    destroy: ->\n        #@undelegateEvents()\n        #@$el.removeData().unbind()\n        @remove()\n        #Backbone.View::remove.call @\n","# Make ajax request more easy to do.\nexports.request = (type, url, data, callback) ->\n    $.ajax\n        type: type\n        url: url\n        data: if data? then JSON.stringify data else null\n        contentType: \"application/json\"\n        dataType: \"json\"\n        success: (data) ->\n            callback null, data if callback?\n        error: (data) ->\n            if data.status in [200, 201, 204, 304]\n                callback null, data if callback?\n            else if data? and data.msg? and callback?\n                callback new Error data.msg\n            else if callback?\n                callback new Error \"Server error occured\"\n\n# Sends a get request with data as body\n# Expected callbacks: success and error\nexports.get = (url, callbacks) ->\n    exports.request \"GET\", url, null, callbacks\n\n# Sends a post request with data as body\n# Expected callbacks: success and error\nexports.post = (url, data, callbacks) ->\n    exports.request \"POST\", url, data, callbacks\n\n# Sends a put request with data as body\n# Expected callbacks: success and error\nexports.put = (url, data, callbacks) ->\n    exports.request \"PUT\", url, data, callbacks\n\n# Sends a delete request with data as body\n# Expected callbacks: success and error\nexports.del = (url, callbacks) ->\n    exports.request \"DELETE\", url, null, callbacks\n","module.exports =\n\nremoveTralingSlash: (path) ->\n    if path.slice(-1) is '/'\n        return path.slice(0, -1)\n    return path\n\ndirName: (path) ->\n    return path.split('/')[...-1].join('/')\n\nnestedDirs: (fileList) ->\n\n    # list of folders to create\n    dirs = []\n\n    # cache the key of folders to prevent useless loops\n    addedPath = []\n\n    # make an object with keys paths, values nest level\n    # from each files we build the tree to recreate it\n    for file in fileList\n        relPath = file.relativePath || file.mozRelativePath || file.webkitRelativePath\n        parents = relPath.slice(0, relPath.lastIndexOf(file.name))\n\n        # get an array of the folders making the file path\n        foldersOfPath = parents.split('/')[...-1]\n        while foldersOfPath.length > 0\n            parent = foldersOfPath.join '/'\n            if not (parent in addedPath)\n                dirs.push path: parent, depth: foldersOfPath.length\n                addedPath.push parent\n                foldersOfPath.pop()\n            else\n                break\n\n    # put them in a list, sorted by nest level\n    dirs.sort (a, b) ->\n        return a.depth - b.depth\n\n    return (dir.path for dir in dirs)\n","\n# return a collection that behave as a merge of two collection\n# if a model is present in both collection (by Id),\n# model from collection A is favored\n\nmodule.exports = MergedCollection = (a, b, uniqAttr='id') ->\n\n    mixed = new Backbone.Collection [],\n        comparator: a.comparator\n\n    mixed.A = a\n    mixed.B = b\n\n    do reset = () ->\n        models = []\n        ids = []\n        a.forEach (model) ->\n            models.push model\n            ids.push model.id\n        b.forEach (model) ->\n            models.push model unless model.id in ids\n\n        mixed.reset models\n\n    sameAs = (model, collection) ->\n        search = {}\n        search[uniqAttr] = model.get uniqAttr\n        collection.findWhere(search)\n\n\n\n    events =\n        reset: => reset()\n\n        remove: (model, collection) =>\n            other = if collection is a then b else a\n            mixed.remove model\n            if model.id and existingOther = sameAs model, other\n                mixed.add existingOther\n\n        add: (model, collection) ->\n            if existing = sameAs model, mixed\n                if collection is a\n                    mixed.remove existing\n                    mixed.add model\n                else\n                    return #do nothing\n            else\n                mixed.add model\n\n        'change:id': (model) ->\n            dups = mixed.where(id: model.id)\n            if dups.length is 2\n                toRemove = if dups[0].collection is b then 0 else 1\n                mixed.remove dups[toRemove]\n\n        sort: ->\n            mixed.sort()\n\n    a.bind events\n    b.bind events\n    return mixed","File = require '../models/file'\n\nmodule.exports = class SocketListener extends CozySocketListener\n\n    models:\n        'file'   : File\n        'folder' : File\n\n    events: [\n        'file.create'\n        'file.update'\n        'file.delete'\n        'folder.create'\n        'folder.update'\n        'folder.delete'\n    ]\n\n    isInCachedFolder: (model) ->\n        path = model.get 'path'\n        return @collection.isPathCached path\n\n    onRemoteCreate: (model) ->\n        if @isInCachedFolder model\n            # console.info \"remote create\", model\n            if not (@collection.get model.get(\"id\"))\n                @collection.add model, merge: true\n\n    onRemoteDelete: (model) ->\n        if @isInCachedFolder model\n            # console.info \"remote delete\", model\n            @collection.remove model\n\n    onRemoteUpdate: (model, collection) ->\n        if @isInCachedFolder model\n            # console.info \"remote update\", model\n            collection.add model, merge: true\n\n    process: (event) ->\n        {doctype, operation, id} = event\n\n        #console.info \"received: #{operation}:#{doctype}\"\n\n        switch operation\n            when 'create'\n                model = new @models[doctype](id: id, type: doctype)\n                model.fetch\n                    success: (fetched) =>\n                        # set as a folder or a file\n                        fetched.set type: doctype\n                        @onRemoteCreate fetched\n\n            when 'update'\n                @collections.forEach (collection) =>\n                    return unless model = collection.get id\n                    model.fetch\n                        success: (fetched) =>\n                            if fetched.changedAttributes()\n                                fetched.set type: doctype\n                                @onRemoteUpdate fetched, collection\n\n            when 'delete'\n                @collections.forEach (collection) =>\n                    return unless model = collection.get id\n                    @onRemoteDelete model, collection\n","BaseView = require 'lib/base_view'\n\n# View that display a collection of subitems\n# used to DRY views\n# Usage : new ViewCollection(collection:collection)\n# Automatically populate itself by creating a itemView for each item\n# in its collection\n\n# can use a template that will be displayed alongside the itemViews\n\n# itemView       : the Backbone.View to be used for items\n# itemViewOptions : the options that will be passed to itemViews\n# collectionEl : the DOM element's selector where the itemViews will\n#                be displayed. Automatically falls back to el if null\n\nmodule.exports = class ViewCollection extends BaseView\n\n    collectionEl: null\n    template: -> ''\n    itemview: null\n    views: {}\n    itemViewOptions: ->\n\n    bufferEl: null\n\n    # Gets the selector of the item views\n    getItemViewSelector: ->\n        classNames = @itemview::className.replace ' ', '.'\n        return \"#{@itemview::tagName}.#{classNames}\"\n\n    # add 'empty' class to view when there is no subview\n    onChange: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # we append the views at a specific index\n    # based on their order in the collection\n    appendView: (view) ->\n        index = @collection.indexOf view.model\n        if index is 0 # insert at the beginning\n            if @isBuffering\n                $(@bufferEl).prepend view.$el\n            else\n                @$collectionEl.prepend view.$el\n        else\n            if @isBuffering\n                brother = @bufferEl.childNodes[index - 1]\n                # if the user goes back and forth during upload\n                # brother may not be defined\n                if brother?\n                    brotherAfter = brother.nextSibling\n                    @bufferEl.insertBefore view.el, brotherAfter\n            else\n                selector = @getItemViewSelector()\n                view.$el.insertAfter $(selector).eq(index - 1)\n\n        ###\n            If buffering is enabled, we batch all appendView to one DOM request\n            thanks to a document fragment. Data are added one by one so we use\n            a set timeout\n        ###\n        if @isBuffering\n            clearTimeout @timeout\n            @timeout = setTimeout =>\n                @cleanBuffer()\n            , 1\n\n    # bind listeners to the collection\n    initialize: ->\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"remove\",  @removeItem\n        @listenTo @collection, \"sort\",    @onSort\n\n        @collectionEl = el if not @collectionEl?\n\n        # we only use buffer for the first render\n        @initializeBuffering()\n\n    # enable buffering\n    initializeBuffering: ->\n        @isBuffering = true\n        @bufferEl = document.createDocumentFragment()\n\n    # append the buffer to the DOM, removes it and disable buffering\n    cleanBuffer: ->\n        if @isBuffering\n            @isBuffering = false\n            @$collectionEl.html @bufferEl\n            @bufferEl = null\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n\n    # after render, we reattach the views\n    afterRender: ->\n        @$collectionEl = $ @collectionEl\n        @appendView view for id, view of @views\n        @onReset @collection\n        @onChange @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        view.remove() for id, view of @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, model: model, @itemViewOptions(model)\n        view = new @itemview options\n        @views[model.cid] = view.render()\n        @appendView view\n        @onChange @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @views[model.cid].remove()\n        delete @views[model.cid]\n\n        @onChange @views\n\n    # We don't re-render the view if the order has not changed\n    # Based on Marionette.ViewCollection\n    onSort: ->\n        selector = @getItemViewSelector()\n        $itemViews = $ selector\n        orderChanged = @collection.find (item, index) =>\n            view = @views[item.cid]\n            indexView = $itemViews.index view.$el\n            return view and indexView isnt index\n\n        @render() if orderChanged\n","module.exports =\n\n    # folder view\n    \"modal error\"               : \"Error\"\n    \"modal ok\"                  : \"OK\"\n    \"modal error get files\"     : \"Error getting files from server\"\n    \"modal error get folders\"   : \"Error getting folders from server\"\n    \"modal error get content\"   : \"An error occurred while retrieving content of folder \\\"%{folderName}\\\" from the server\"\n    \"modal error empty name\"    : \"The name can't be empty\"\n    \"modal error file invalid\"  : \"doesn't seem to be a valid file\"\n\n    \"root folder name\"          : \"root\"\n\n    # breadcrumbs\n    \"breadcrumbs search title\"  : \"Search\"\n\n    # files view\n    \"modal error file exists\"   : \"Sorry, a file or folder having this name already exists\"\n    \"modal error size\"          : \"Sorry, you haven't enough storage space\"\n    \"modal error file upload\"   : \"File could not be sent to server\"\n    \"modal error folder create\" : \"Folder could not be created\"\n    \"modal error folder exists\" : \"Sorry, a file or folder having this name already exists\"\n    \"modal error zip empty folder\" : \"You can't download an empty folder as a ZIP.\"\n\n    # file view\n    \"modal are you sure\"        : \"Are you sure ?\"\n    \"modal delete msg\"          : \"Deleting cannot be undone\"\n    \"modal delete ok\"           : \"Delete\"\n    \"modal cancel\"              : \"cancel\"\n    \"modal delete error\"        : \"cancel\"\n\n    \"modal error in use\"        : \"Name already in use\"\n    \"modal error rename\"        : \"Name could not be changed\"\n    \"modal error empty name\"    : \"Name can't be empty\"\n    \"modal error no data\"       : \"No name and no folder to upload\"\n\n    \"tag\"                       : \"tag\"\n\n    # file_edit template\n    \"file edit save\"            : \"Save\"\n    \"file edit cancel\"          : \"cancel\"\n    #tooltip\n    \"tooltip delete\"          : \"Delete\"\n    \"tooltip edit\"            : \"Rename\"\n    \"tooltip download\"        : \"Download\"\n    \"tooltip share\"            : \"Share\"\n\n    # folder template\n    'and x files'         : \"\"\"\n       and %{smart_count} other file ||||\n       and %{smart_count} other files\n    \"\"\"\n    \"already exists\"      : \"already exists.\"\n    \"failed to upload\"    : \"could not be sent to server.\"\n    \"upload complete\"     : \"\"\"\n        One file successfully uploaded. ||||\n        %{smart_count} files successfully uploaded.\n    \"\"\"\n\n    \"upload caption\"            : \"Upload a new file\"\n    \"upload msg\"                : \"Drag files or click here to choose files.\"\n    \"upload msg selected\"       : \"\"\"\n        You have selected %{smart_count} file, click Add to upload it. ||||\n        You have selected %{smart_count} files, click Add to upload them.\n    \"\"\"\n    \"upload close\"              : \"Close\"\n\n    \"upload send\"               : \"Add\"\n    \"upload button\"             : \"Upload a file\"\n    \"upload success\"            : \"Upload successfuly completed!\"\n    \"upload end button\"         : \"Close\"\n    \"total progress\"            : \"Total progress\"\n\n    \"new folder caption\"        : \"Add a new folder\"\n    \"new folder msg\"            : \"Create a folder named:\"\n    \"new folder close\"          : \"Close\"\n    \"new folder send\"           : \"Create Folder\"\n    \"new folder button\"         : \"Create a new folder\"\n\n    \"drop message\"              : \"Drop your files here to automatically add them\"\n\n    \"upload folder msg\"         : \"Upload a folder\"\n    \"upload folder separator\"   : \"or\"\n\n    \"folder\"                    : \"Folder\"\n    \"image\"                     : \"Image\"\n    \"document\"                  : \"Document\"\n    \"music\"                     : \"Music\"\n    \"video\"                     : \"Video\"\n\n    \"yes\"                       : \"Yes\"\n    \"no\"                        : \"No\"\n    \"ok\"                        : \"Ok\"\n\n    \"name\"                      : \"Name\"\n    \"type\"                      : \"Type\"\n    \"size\"                      : \"Size\"\n    \"date\"                      : \"Last update\"\n    \"download\"                  : \"Download\"\n    \"MB\"                        : \"MB\"\n    \"KB\"                        : \"KB\"\n    \"B\"                         : \"B\"\n    \"files\"                     : \"files\"\n    \"element\"                   : \"%{smart_count} element |||| %{smart_count} elements\"\n    \"no file in folder\"         : \"This folder is empty.\"\n    \"no file in search\"         : \"Your search did not match any documents.\"\n\n    \"enable notifications\": \"Enable notifications\"\n    \"disable notifications\": \"Disable notifications\"\n    \"notifications enabled\": \"Notifications enabled\"\n    \"notifications disabled\": \"Notifications disabled\"\n\n    \"open folder\": \"Open the folder\"\n    \"download file\": \"View the file\"\n\n    # clearance modal\n    \"also have access\"                : \"These people also have access, because they have access to a parent folder\"\n    \"cancel\"                          : \"Cancel\"\n    \"copy paste link\"                 : \"To give access to your contact send him/her the link below:\"\n    \"details\"                         : \"Details\"\n    \"inherited from\"                  : \"inherited from\"\n    \"modal question folder shareable\" : \"Select share mode for this folder\"\n    \"modal shared folder custom msg\"  : \"Enter email and press enter\"\n    \"modal shared folder link msg\"    : \"Send this link to let people access this folder\"\n    \"modal send mails\"                : \"Send a notification\"\n    \"modal question file shareable\"   : \"Select share mode for this file\"\n    \"modal shared file custom msg\"    : \"Enter email and press enter\"\n    \"modal shared file link msg\"      : \"Send this link to let people access this file\"\n    \"only you can see\"                : \"Only you and the people listed below can access this resource\"\n    \"public\"                          : \"Public\"\n    \"private\"                         : \"Private\"\n    \"shared\"                          : \"Shared\"\n    \"save\"                            : \"Save\"\n    \"see link\"                        : \"See link\"\n    \"send mails question\"             : \"Send a notification email to:\"\n    \"sharing\"                         : \"Sharing\"\n    \"revoke\"                          : \"Revoke\"\n    \"forced public\"                   : \"This is public because one of the parent folder is public:\"\n    \"confirm\"                         : \"Confirm\"\n    \"share forgot add\"                : \"\"\"\n        Looks like you forgot to click the Add button\n    \"\"\"\n    \"share confirm save\"              : \"\"\"\n        The changes you made to the permissions will not be saved. Is that what you want ?\n    \"\"\"\n    \"yes forgot\"                      : \"Back\"\n    \"no forgot\"                       : \"It's ok\"\n    \"perm\"                            : \"can \"\n    \"perm r file\"                     : \"download this file\"\n    \"perm r folder\"                   : \"browse this folder\"\n    \"perm rw folder\"                  : \"browse and upload files\"\n    \"change notif\"                    : \"\"\"\n        Check this box to be notified when a contact\n        add a file to this folder.\"\"\"\n    \"send email hint\": \"Notification emails will be sent one time on save\"\n\n    'move': 'Move'\n    'tooltip move': 'Move element to another folder.'\n    \"moving...\": 'Moving...'\n    'move element to': 'Move element to'\n    'error occured canceling move': 'An error occured while canceling move.'\n    'error occured while moving element': 'An error occured while moving element'\n\n    'file successfully moved to': 'File successfully moved to'\n\n    # Bulk move modal\n    'moving selected elements': 'Moving selected elements'\n    'move elements to': \"Move elements to\"\n    \"elements successfully moved to\": 'Elements successfully moved to'\n    'close': 'Close'\n","module.exports =\n\n    # folder view\n    \"modal error\"               : \"Erreur\"\n    \"modal ok\"                  : \"OK\"\n    \"modal error get files\"     : \"Une erreur s'est produite en récupérant les fichiers du serveur\"\n    \"modal error get folders\"   : \"Une erreur s'est produite en récupérant les dossiers du serveur\"\n    \"modal error get content\"   : \"Une erreur s'est produite en récupérant le contenu du dossier \\\"%{folderName}\\\" sur le serveur\"\n    \"modal error empty name\"    : \"Le nom ne peut pas être vide\"\n    \"modal error file invalid\"  : \"Le fichier ne parait pas être valide\"\n\n    \"root folder name\"          : \"racine\"\n\n    # breadcrumbs\n    \"breadcrumbs search title\"  : \"Recherche\"\n\n    # files view\n    \"modal error file exists\"   : \"Désolé, un fichier ou un dossier a déjà le même nom\"\n    \"modal error size\"          : \"Désolé, vous n'avez pas assez d'espace de stockage\"\n    \"modal error file upload\"   : \"Le fichier n'a pas pu être envoyé au serveur\"\n    \"modal error folder create\" : \"Le dossier n'a pas pu être créé\"\n    \"modal error folder exists\" : \"Désolé, un fichier ou un dossier a déjà le même nom\"\n    \"modal error zip empty folder\" : \"Vous ne pouvez pas télécharger un dossier vide en tant que ZIP.\"\n\n    # file view\n    \"modal are you sure\"        : \"Etes-vous sûr ?\"\n    \"modal delete msg\"          : \"La suppression ne pourra pas être annulée\"\n    \"modal delete ok\"           : \"Supprimer\"\n    \"modal cancel\"              : \"Annuler\"\n    \"modal delete error\"        : \"Annuler\"\n\n    \"modal error in use\"        : \"Ce nom est déjà utilisé\"\n    \"modal error rename\"        : \"Le nom n'a pas pu être modifié\"\n    \"modal error empty name\"    : \"Le nom du dossier ne peut pas être vide\"\n\n    \"tag\"                       : \"étiquette\"\n\n    #tooltip\n    \"tooltip delete\"          : \"Supprimer\"\n    \"tooltip edit\"            : \"Renommer\"\n    \"tooltip download\"        : \"Télécharger\"\n    \"tooltip share\"            : \"Partager\"\n\n    # file_edit template\n    \"file edit save\"            : \"Sauvegarder\"\n    \"file edit cancel\"          : \"Annuler\"\n\n    # folder template\n    'and x files'         : \"\"\"\n       et un autre fichier ||||\n       et %{smart_count} autres fichiers\n    \"\"\"\n    \"already exists\"      : \"existent déjà.\"\n    \"failed to upload\"    : \"n'ont pas pu être envoyé au serveur\"\n    \"upload complete\"     : \"\"\"\n        Le fichier a été transféré. ||||\n        %{smart_count} fichiers ont été transférés.\n    \"\"\"\n    \"upload caption\"            : \"Ajouter des fichiers\"\n    \"upload msg\"                : \"Glissez des fichiers ou cliquez ici pour sélectionner des fichiers à mettre en ligne.\"\n    \"upload msg selected\"       : \"\"\"\n        Vous avez sélectionné %{smart_count} fichier, cliquez sur \"Ajouter\" pour les mettre en ligne. ||||\n        Vous avez sélectionné %{smart_count} fichiers, cliquez sur \"Ajouter\" pour les mettre en ligne.\n    \"\"\"\n    \"upload close\"              : \"Annuler\"\n    \"upload send\"               : \"Ajouter\"\n    \"upload button\"             : \"Ajouter un fichier\"\n    \"upload success\"            : \"Ajouté avec succès !\"\n    \"upload end button\"         : \"Fermer\"\n    \"total progress\"            : \"Progression totale\"\n\n    \"new folder caption\"        : \"Créer un nouveau dossier\"\n    \"new folder msg\"            : \"Entrer le nom du dossier :\"\n    \"new folder close\"          : \"Annuler\"\n    \"new folder send\"           : \"Créer\"\n    \"new folder button\"         : \"Créer un nouveau dossier\"\n\n    \"drop message\"              : \"Lâchez ici vos fichiers pour les ajouter\"\n\n    \"upload folder msg\"         : \"Mettre en ligne un dossier\"\n    \"upload folder separator\"   : \"ou\"\n\n    \"folder\"                    : \"Dossier\"\n    \"image\"                     : \"Image\"\n    \"document\"                  : \"Document\"\n    \"music\"                     : \"Musique\"\n    \"video\"                     : \"Vidéo\"\n\n    \"yes\"                       : \"Oui\"\n    \"no\"                        : \"Non\"\n    \"ok\"                        : \"Ok\"\n\n    \"name\"                      : \"Nom\"\n    \"type\"                      : \"Type\"\n    \"size\"                      : \"Taille\"\n    \"date\"                      : \"Dernière modification\"\n    \"download\"                  : \"Télécharger\"\n    \"MB\"                        : \"Mo\"\n    \"KB\"                        : \"Ko\"\n    \"B\"                         : \"o\"\n    \"files\"                     : \"fichiers\"\n    \"element\"                   : \"%{smart_count} élément |||| %{smart_count} éléments\"\n    \"no file in folder\"         : \"Ce dossier est vide.\"\n\n    \"enable notifications\": \"Activer les notifications\"\n    \"disable notifications\": \"Désactiver les notifications\"\n    \"notifications enabled\": \"Notifications activées\"\n    \"notifications disabled\": \"Notifications désactivées\"\n\n    \"open folder\": \"Ouvrir le dossier\"\n    \"download file\": \"Consulter le fichier\"\n\n     # clearance modal\n    \"also have access\"                : \"Ces personnes ont égalment accès, car ils ont accès à un dossier parent\"\n    \"cancel\"                          : \"Annuler\"\n    \"copy paste link\"                 : \"Pour donner accès à votre contact envoyez lui ce lien : \"\n    \"details\"                         : \"Details\"\n    \"inherited from\"                  : \"hérité de\"\n    \"modal question folder shareable\" : \"Choisissez le mode de partage pour ce dossier\"\n    \"modal shared folder custom msg\"  : \"Entrez un email et appuyez sur enter\"\n    \"modal shared folder link msg\"    : \"Envoyez ce lien pour qu'ils puissent accéder à ce dossier\"\n    \"modal question file shareable\"   : \"Choisissez le mode de partage pour ce fichier\"\n    \"modal shared file custom msg\"    : \"Entrez un email et appuyez sur enter\"\n    \"modal shared file link msg\"      : \"Envoyez ce lien pour qu'ils puissent accéder à ce dossier\"\n    \"only you can see\"                : \"Seul vous et les personnes ci-dessous peuvent accéder à cette ressource.\"\n    \"public\"                          : \"Public\"\n    \"private\"                         : \"Privé\"\n    \"shared\"                          : \"Partagé\"\n    \"save\"                            : \"Sauvegarder\"\n    \"see link\"                        : \"Voir le lien\"\n    \"sharing\"                         : \"Partage\"\n    \"revoke\"                          : \"Révoquer la permission\"\n    \"send mails question\"             : \"Envoyer un email de notification à : \"\n    \"modal send mails\"                : \"Envoyer une notification\"\n    \"forced public\"                   : \"Ce dossier est public car un parent est public : \"\n    \"confirm\"                         : \"Confirmer\"\n    \"share forgot add\"                : \"\"\"\n        Il semble que vous ayez oublié d'appuyer sur le boutton Add\n    \"\"\"\n    \"share confirm save\"              : \"\"\"\n        Les changements effectués sur les permissions ne seront pas sauvegardés. Etes vous sur ?\n    \"\"\"\n    \"yes forgot\"                      : \"Retour\"\n    \"no forgot\"                       : \"Ok\"\n    \"perm\"                            : \"peut \"\n    \"perm r file\"                     : \"consulter ce fichier\"\n    \"perm r folder\"                   : \"parcourir ce dossier\"\n    \"perm rw folder\"                  : \"parcourir ce dossier et ajouter des fichiers\"\n    \"change notif\"                    : \"\"\"\n        Cocher cette case pour recevoir une notification cozy quand un contact\n        ajoute un fichier à ce dossier.\"\"\"\n    \"send email hint\": \"Des emails de notification seront envoyés lors de la première sauvegarde.\"\n\n    \"move\": \"Déplacer\"\n    'tooltip move': \"Déplacer l'élément dans un autre dossier.\"\n    \"moving...\": \"Déplacement en cours...\"\n    \"move element to\": \"Déplacer l'élément vers \"\n    \"error occured canceling move\": \"Une erreur est survenue en annulant le déplacement.\"\n    \"error occured while moving element\": \"Une erreur est survenue en déplaçant l'élément.\"\n    \"file successfully moved to\": 'Fichier déplacé avec succès vers '\n\n    # Bulk move modal\n    'moving selected elements': 'Déplacer des éléments'\n    'move elements to': \"Déplacer les éléments vers \"\n    \"elements successfully moved to\": 'Eléments déplacés avec succès vers '\n    'close': 'Fermer'\n","module.exports =\n\n    # folder view\n    \"modal error\"               : \"Eroare\"\n    \"modal ok\"                  : \"OK\"\n    \"modal error get files\"     : \"A apărut o eroare în transferul de fișiere de la server\"\n    \"modal error get folders\"   : \"A apărut o eroare în transferul de directoare de la server\"\n    \"modal error get content\"   : \"An error occurred while retrieving content of folder \\\"%{folderName}\\\" from the server\"\n    \"modal error empty name\"    : \"Numele nu poate fi vid\"\n    \"modal error file invalid\"  : \"Fișierul nu pare a fi valid\"\n\n    \"root folder name\"          : \"root\"\n\n    # breadcrumbs\n    \"breadcrumbs search title\"  : \"Căutare\"\n\n    # files view\n    \"modal error file exists\"   : \"Ne pare rău, există deja un document cu acest nume\"\n    \"modal error file upload\"   : \"Fișierul nu a putut fi trimis server-ului\"\n    \"modal error folder create\" : \"Directorul nu a putut fi creat\"\n    \"modal error folder exists\" : \"Ne pare rău, există deja un director cu acest nume\"\n    \"modal error zip empty folder\" : \"You can't download an empty folder as a ZIP.\"\n\n    # file view\n    \"modal are you sure\"        : \"Sunteți sigur(ă)?\"\n    \"modal delete msg\"          : \"Ștergerea nu poate fi anulată\"\n    \"modal delete ok\"           : \"Ștergere\"\n    \"modal cancel\"              : \"Anulare\"\n    \"modal delete error\"        : \"Anulare\"\n\n    \"modal error in use\"        : \"Nume deja folosit\"\n    \"modal error rename\"        : \"Numele nu a putut fi schimbat\"\n    \"modal error empty name\"    : \"Numele nu poate fi vid\"\n    \"modal error no data\"       : \"Nu există date de încărcat\"\n\n    \"tag\"                       : \"etichetă\"\n\n    # file_edit template\n    \"file edit save\"            : \"Salvare\"\n    \"file edit cancel\"          : \"Anulare\"\n    #tooltip\n    \"tooltip delete\"          : \"Ștergere\"\n    \"tooltip edit\"            : \"Redenumire\"\n    \"tooltip download\"        : \"Descărcare\"\n    \"tooltip share\"            : \"Partajare\"\n\n    # folder template\n    'and x files'         : \"\"\"\n       și un alt fișier ||||\n       și %{smart_count} alte fișiere\n    \"\"\"\n    \"already exists\"      : \"există deja.\"\n    \"failed to upload\"    : \"nu au putut fi trimise la server.\"\n    \"upload complete\"     : \"\"\"\n        dosarul a fost trimis cu succes la server ||||\n        %{smart_count} dosare au fost trimise cu succes la server.\n    \"\"\"\n    \"upload caption\"            : \"Încărcare fișier\"\n    \"upload msg\"                : \"Alegeți fișierul de încărcat:\"\n    \"upload close\"              : \"Anulare\"\n    \"upload send\"               : \"Încărcare\"\n\n    \"upload button\"             : \"Încărcați un fișier aici\"\n\n    \"new folder caption\"        : \"Adăugați un nou director\"\n    \"new folder msg\"            : \"Creați un director cu numele:\"\n    \"new folder close\"          : \"Anulare\"\n    \"new folder send\"           : \"OK\"\n    \"new folder button\"         : \"Creare director\"\n\n    \"upload folder msg\"         : \"Încărcați un director\"\n\n    \"folder\"                    : \"Director\"\n    \"image\"                     : \"Imagine\"\n    \"document\"                  : \"Document\"\n    \"music\"                     : \"Muzică\"\n    \"video\"                     : \"Video\"\n\n    \"yes\"                       : \"Da\"\n    \"no\"                        : \"Nu\"\n    \"ok\"                        : \"Ok\"\n\n    \"name\"                      : \"Nume\"\n    \"type\"                      : \"Tip\"\n    \"size\"                      : \"Dimensiune\"\n    \"date\"                      : \"Ultima modificare\"\n    \"download\"                  : \"Descărcare\"\n    \"MB\"                        : \"Mo\"\n    \"KB\"                        : \"Ko\"\n    \"B\"                         : \"o\"\n\n    \"enable notifications\": \"Activare notificări\"\n    \"disable notifications\": \"Dezactivare notificări\"\n\n    \"open folder\": \"Accesare director\"\n    \"download file\": \"Descărcare fișier\"\n\n    # clearance modal\n    \"also have access\"                : \"Aceste persoane au acces, deoarece au acces la un director părinte\"\n    \"cancel\"                          : \"Anulare\"\n    \"copy paste link\"                 : \"Pentru a oferi acces la dvs. de contact trimite el/ea pe link-ul de mai jos: \"\n    \"details\"                         : \"Detalii\"\n    \"inherited from\"                  : \"moștenit de la\"\n    \"modal question folder shareable\" : \"Alegeți modul de partajare pentru acest director\"\n    \"modal shared folder custom msg\"  : \"Introduceți adresa de e-mail și apăsați Enter\"\n    \"modal shared folder link msg\"    : \"Trimiteți această adresă persoanelor pentru a putea accesa directorul\"\n    \"modal send mails\"                : \"Trimiteți o notificare\"\n    \"modal question file shareable\"   : \"Alegeți modul de partajare pentru acest document\"\n    \"modal shared file custom msg\"    : \"Introduceți adresa de e-mail și apăsați Enter\"\n    \"modal shared file link msg\"      : \"Trimiteți această adresă persoanelor pentru a putea accesa directorul\"\n    \"only you can see\"                : \"Numai Dvs. și persoanele de mai jos au acces\"\n    \"public\"                          : \"Public\"\n    \"private\"                         : \"Privat\"\n    \"shared\"                          : \"Partajat\"\n    \"save\"                            : \"Salvare\"\n    \"see link\"                        : \"Vedeți adresă\"\n    \"send mails question\"             : \"Trimiteți e-mail de notificare la: \"\n    \"sharing\"                         : \"Partajare\"\n    \"revoke\"                          : \"Revocare permisiune\"\n    \"forced public\"                   : \"Acesta este public deoarece un director părinte este public: \"\n    \"perm\"                            : \"poate \"\n    \"perm r file\"                     : \"descărca acest fișier\"\n    \"perm r folder\"                   : \"parcurge acest dosar \"\n    \"perm rw folder\"                  : \"parcurge acest dosar și încărca fișiere\"\n    \"change notif\"                    : \"\"\"Bifați această casetă pentru a fi notificat atunci când o persoană de contact\n         adăuga un fișier în acest dosar.\n    \"\"\"\n    \"send email hint\": \"Notification emails will be sent one time on save\"\n","client = require '../lib/client'\n\nmodule.exports = class File extends Backbone.Model\n\n    # The breadcrumb is an array of vanilla JS objects\n    # representing a parent folder.\n    breadcrumb: []\n\n    constructor: (options) ->\n        doctype = options.docType?.toLowerCase()\n        if doctype?\n            options.type = if doctype is 'file' then 'file' else 'folder'\n        super options\n\n\n    # helpers\n    isFolder: -> return @get('type') is 'folder'\n    isFile: -> return @get('type') is 'file'\n    isSearch: -> return @get('type') is 'search'\n    isRoot: -> return @get('id') is 'root'\n\n    # Only relevant if it's a file\n    isBeingUploaded: -> return @isFile() and @file? and not @isUploaded\n\n    parse: (data) ->\n        delete data.success\n        return data\n\n    # the repository is the model's full path (name included in the path)\n    getRepository: -> return if @isRoot() then \"\" else \"#{@get(\"path\")}/#{@get(\"name\")}\"\n\n    # Overrides sync method to allow file upload (multipart request)\n    # and progress events\n    sync: (method, model, options)->\n\n        # this is a new model, let's upload it as a multipart\n        if model.file\n            formdata = new FormData()\n            formdata.append 'name', model.get 'name'\n            formdata.append 'path', model.get 'path'\n            formdata.append 'lastModification', model.get 'lastModification'\n            formdata.append 'file', model.file\n\n            # trigger upload progress on the model\n            progress = (e) ->\n                model.loaded = e.loaded\n                model.trigger 'progress', e\n\n            _.extend options,\n                contentType: false\n                data: formdata\n                # patch Model.sync so it could trigger progress event\n                xhr: ->\n                    xhr = $.ajaxSettings.xhr()\n                    if xhr.upload\n                        xhr.upload.addEventListener 'progress', progress, false\n                    xhr\n\n        Backbone.sync.apply @, arguments\n\n    urlRoot: ->\n        prefix = if app.isPublic then '../' else ''\n\n        if @isFolder()\n            prefix + 'folders/'\n        else if @isSearch()\n            prefix + 'search/'\n        else\n            prefix + 'files/'\n\n    # Overrides the url method to append the key if it's public mode\n    url: (toAppend = '') ->\n        url = super()\n        key = if app.isPublic then window.location.search else ''\n\n        return url + toAppend + key\n\n    getPublicURL: (key) ->\n        if @isFile()\n            \"#{window.location.origin}/public/files/#{@urlRoot()}#{@id}/attach/#{@get 'name'}\"\n        else\n            \"#{window.location.origin}/public/files/#{@urlRoot()}#{@id}\"\n\n    # Only relevant if model is a folder\n    getZipURL: ->\n        if @isFolder()\n            toAppend = \"/zip/#{@get 'name'}\"\n            @url toAppend\n\n    # Only relevant if model is a file\n    getAttachmentUrl: ->\n        # if the file is being uploaded, it's not accessible (yet)\n        if @isBeingUploaded()\n            \"#\"\n        else if @isFile()\n            toAppend = \"/attach/#{@get 'name'}\"\n            @url toAppend\n\n    getDownloadUrl: ->\n        if @isFile()\n            toAppend = \"/download/#{@get 'name'}\"\n            @url toAppend\n        else if @isFolder()\n            @getZipURL()\n\n    validate: (attrs) ->\n        errors = []\n        if not attrs.name or attrs.name is ''\n            errors.push\n                field: 'name'\n                value: \"A name must be set.\"\n\n        if errors.length > 0\n            return errors\n        return\n\n    prepareCallbacks: (callbacks, presuccess, preerror) ->\n        {success, error} = callbacks or {}\n        presuccess ?= (data) => @set data.app\n        @trigger 'request', @, null, callbacks\n        callbacks.success = (data) =>\n            presuccess data if presuccess\n            @trigger 'sync', @, null, callbacks\n            success data if success\n        callbacks.error = (jqXHR) =>\n            preerror jqXHR if preerror\n            @trigger 'error', @, jqXHR, {}\n            error jqXHR if error\n\n    ###\n        ONLY RELEVANT IF IT'S A FOLDER\n        Fetches content (folders and files) for the current folder\n        the request also responds with the breadcrumb\n    ###\n    fetchContent: (callbacks) ->\n        @prepareCallbacks callbacks\n\n        url = \"#{@urlRoot()}content\"\n        key = window.location.search # relevant if shared mode\n        if app.isPublic and not @isSearch()\n            url = \"#{@urlRoot()}#{@id}/content#{key}\"\n        else if @isSearch()\n            url += key\n\n        client.post url, id: @id, (err, body) =>\n            if err?\n                @setBreadcrumb []\n                callbacks err\n            else\n                if body.parents?\n                    {content, parents} = body\n                else\n                    # during search or for root, there is not parents\n                    content = body\n                    parents = []\n                @setBreadcrumb parents or []\n                callbacks null, content, parents\n\n    # Set the breadcrumb attribute and append the root model to it\n    # If the folder is a search query, the breadcrumb is the query\n    setBreadcrumb: (parents) ->\n        if @get('type') is 'search'\n            @breadcrumb = [window.app.root.toJSON(), @toJSON()]\n        else\n            parents.unshift window.app.root.toJSON()\n            @breadcrumb = parents\n","app = require 'application'\nFile = require './models/file'\nFileCollection = require './collections/files'\nMergedCollection = require './lib/merged_collection'\nFolderView = require './views/folder'\nPublicFolderView = require './views/public_folder'\n\n###\nBinds routes to code actions.\nThis is also used as a controller to initialize views and perform data fetching\n###\nmodule.exports = class Router extends Backbone.Router\n\n    folderView: null\n\n    routes:\n        '': 'main'\n        'folders/:folderid' : 'folder'\n        'search/:query' : 'search'\n\n    main: ->\n        rootID = app.root.get 'id'\n        @_loadFolderView rootID\n\n    folder: (id) -> @_loadFolderView id\n\n    search: (query) ->\n        folder = new File\n                id: query\n                type: \"search\"\n                name: \"#{t('breadcrumbs search title')} '#{query}'\"\n\n        folder.fetchContent (err, content) =>\n            collection = new FileCollection content\n\n            # we don't re-render the view to prevent the search field\n            # from being reset\n            if @folderView?\n                @folderView.updateSearch folder, collection\n            else\n                @_renderFolderView folder, collection, query\n\n    # get the data and render the view\n    _loadFolderView: (folderID) ->\n        # add the spinner during folder change\n        @folderView.spin() if @folderView?\n\n        # retrieve folder info and content from data source or cache\n        app.baseCollection.getByFolder folderID, (err, folder, collection) =>\n            if err? then console.log err\n            else\n                @_renderFolderView folder, collection\n\n    # process the actual render\n    _renderFolderView: (folder, collection, query = '') ->\n        if @folderView?\n            @folderView.destroy()\n            # because destroying the view also removes the element\n            $('html').append $ '<body></body>'\n\n        # we generate a mixed collection with content & uploads\n        filteredUploads = app.uploadQueue.filteredByFolder folder, collection.comparator\n        mergedCollection = MergedCollection(collection, filteredUploads, 'name')\n\n        @folderView = @_getFolderView\n            model: folder\n            collection: mergedCollection\n            baseCollection: app.baseCollection\n            breadcrumbs: app.breadcrumbs\n            uploadQueue: app.uploadQueue\n            query: query\n        @folderView.render()\n\n    # factory to get the proper folder object based on mode (shared or not)\n    _getFolderView: (params) ->\n        if app.isPublic\n            return new PublicFolderView _.extend params, rootFolder: app.root\n        else\n            return new FolderView params\n\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class BreadcrumbsView extends BaseView\n\n    itemview: require './templates/breadcrumbs_element'\n    tagName: \"ul\"\n\n    # collection is a simple array, not a backbone collection\n    render: ->\n        # temporary trick to prevent public area\n        # to display the root (shared folder) twice in shared mode\n        @collection.shift() unless @collection[0].id is 'root'\n\n        opacity = if @collection.length is 1 then '0.5' else '1'\n        @$el.css 'opacity', opacity\n\n        @$el.empty()\n        for folder in @collection\n            @$el.append @itemview model: folder\n        @\n\n","BaseView = require '../lib/base_view'\nModalView = require \"./modal\"\nModalShareView = null\nTagsView = require \"../widgets/tags\"\nProgressBar = require '../widgets/progressbar'\n\nclient = require \"../lib/client\"\n\nmodule.exports = class FileView extends BaseView\n\n    className      : 'folder-row'\n    tagName        : 'tr'\n    templateNormal : require './templates/file'\n    templateEdit   : require './templates/file_edit'\n    templateSearch : require './templates/file_search'\n\n    events:\n        'click a.file-delete'      : 'onDeleteClicked'\n        'click a.file-share'       : 'onShare'\n        'click a.file-edit'        : 'onEditClicked'\n        'click a.file-edit-save'   : 'onSaveClicked'\n        'click a.file-edit-cancel' : 'onCancelClicked'\n        'click a.file-move'        : 'onMoveClicked'\n        'keydown input.file-edit-name'  : 'onKeyPress'\n        'change input.selector': 'onSelectChanged'\n\n    mimeClasses:\n        'application/octet-stream'      : 'fa-file-o'\n        'application/x-binary'          : 'fa-file'\n        'text/plain'                    : 'fa-file-text-o'\n        'text/richtext'                 : 'fa-file-text-o'\n        'application/x-rtf'             : 'fa-file-text-o'\n        'application/rtf'               : 'fa-file-text-o'\n        'application/msword'            : 'fa-file-word-o'\n        'application/mspowerpoint'      : 'fa-file-powerpoint-o'\n        'application/vnd.ms-powerpoint' : 'fa-file-powerpoint-o'\n        'application/x-mspowerpoint'    : 'fa-file-powerpoint-o'\n        'application/excel'             : 'fa-file-excel-o'\n        'application/x-excel'           : 'fa-file-excel-o'\n        'aaplication/vnd.ms-excel'      : 'fa-file-excel-o'\n        'application/x-msexcel'         : 'fa-file-excel-o'\n        'application/pdf'               : 'fa-file-pdf-o'\n        'text/html'                     : 'fa-file-code-o'\n        'text/asp'                      : 'fa-file-code-o'\n        'text/css'                      : 'fa-file-code-o'\n        'application/x-javascript'      : 'fa-file-code-o'\n        'application/x-lisp'            : 'fa-file-code-o'\n        'application/xml'               : 'fa-file-code-o'\n        'text/xml'                      : 'fa-file-code-o'\n        'application/x-sh'              : 'fa-file-code-o'\n        'text/x-script.python'          : 'fa-file-code-o'\n        'application/x-bytecode.python' : 'fa-file-code-o'\n        'text/x-java-source'            : 'fa-file-code-o'\n        'application/postscript'        : 'fa-image'\n        'image/gif'                     : 'fa-image'\n        'image/jpg'                     : 'fa-image'\n        'image/jpeg'                    : 'fa-image'\n        'image/pjpeg'                   : 'fa-image'\n        'image/x-pict'                  : 'fa-image'\n        'image/pict'                    : 'fa-image'\n        'image/png'                    : 'fa-image'\n        'image/x-pcx'                   : 'fa-image'\n        'image/x-portable-pixmap'       : 'fa-image'\n        'image/x-tiff'                  : 'fa-image'\n        'image/tiff'                    : 'fa-image'\n        'audio/aiff'                    : 'fa-file-audio-o'\n        'audio/x-aiff'                  : 'fa-file-audio-o'\n        'audio/midi'                    : 'fa-file-audio-o'\n        'audio/x-midi'                  : 'fa-file-audio-o'\n        'audio/x-mid'                   : 'fa-file-audio-o'\n        'audio/mpeg'                    : 'fa-file-audio-o'\n        'audio/x-mpeg'                  : 'fa-file-audio-o'\n        'audio/mpeg3'                   : 'fa-file-audio-o'\n        'audio/x-mpeg3'                 : 'fa-file-audio-o'\n        'audio/wav'                     : 'fa-file-audio-o'\n        'audio/x-wav'                   : 'fa-file-audio-o'\n        'video/avi'                     : 'fa-file-video-o'\n        'video/mpeg'                    : 'fa-file-video-o'\n        'application/zip'               : 'fa-file-archive-o'\n        'multipart/x-zip'               : 'fa-file-archive-o'\n        'multipart/x-zip'               : 'fa-file-archive-o'\n        'application/x-bzip'            : 'fa-file-archive-o'\n        'application/x-bzip2'           : 'fa-file-archive-o'\n        'application/x-gzip'            : 'fa-file-archive-o'\n        'application/x-compress'        : 'fa-file-archive-o'\n        'application/x-compressed'      : 'fa-file-archive-o'\n        'application/x-zip-compressed'  : 'fa-file-archive-o'\n        'multipart/x-gzip'              : 'fa-file-archive-o'\n\n    template: (args) ->\n        if @isSearchMode\n            @templateSearch args\n        else\n            @templateNormal args\n\n    getRenderData: ->\n        _.extend super(),\n            isBeingUploaded: @model.isBeingUploaded()\n            attachmentUrl: @model.getAttachmentUrl()\n            downloadUrl: @model.getDownloadUrl()\n\n    initialize: (options) ->\n        @isSearchMode = options.isSearchMode\n        @listenTo @model, 'change', @refresh\n        @listenTo @model, 'request', =>\n            @$('.spinholder').spin 'small'\n        @listenTo @model, 'sync error', =>\n            @$('.spinholder').spin false\n\n        @listenTo @model, 'toggle-select', @onToggleSelect\n\n        # prevent contacts loading in shared area\n        unless app.isPublic\n            ModalShareView ?= require \"./modal_share\"\n\n        # If the model is a folder, we listen to the upload queue to enable or\n        # disable the \"something is being uploaded in my tree\" indicator\n        if @model.isFolder()\n            uploadQueue = options.uploadQueue\n            path = @model.getRepository()\n            numUploadChildren = uploadQueue.getNumUploadingElementsByPath path\n            @hasUploadingChildren = numUploadChildren > 0\n\n            @listenTo uploadQueue, 'add remove reset', =>\n                hasItems = uploadQueue.getNumUploadingElementsByPath(path) > 0\n                @$('.fa-folder').toggleClass 'spin', hasItems\n\n            @listenTo uploadQueue, 'upload-complete', =>\n                @hasUploadingChildren = false\n                @$('.fa-folder').removeClass 'spin'\n\n    refresh: ->\n\n        changes = Object.keys @model.changed\n\n        if changes.length is 1\n            if changes[0] is 'tags'\n                return # only tags has changed, TagsView handle it\n\n            if changes[0] is 'lastModification'\n                # this change often, let's not re-render the whole view\n                date = moment(@model.changed.lastModification).calendar()\n                @$('td.date-column-cell span').text date\n                return\n\n        # more complex change = rerender\n        @render()\n\n\n    displayError: (msg) ->\n        @errorField ?= $('<span class=\"error\">').insertAfter @$('.tags')\n        if msg is false then @errorField.hide()\n        else @errorField.text msg\n\n    onDeleteClicked: ->\n        new ModalView t(\"modal are you sure\"), t(\"modal delete msg\"), t(\"modal delete ok\"), t(\"modal cancel\"), (confirm) =>\n            if confirm\n                @model.destroy\n                    error: ->\n                        ModalView.error t(\"modal delete error\")\n\n    onEditClicked: ->\n        width = @$(\".caption\").width() + 10\n        model = @model.toJSON()\n        model.class = 'folder' unless model.class?\n        @$el.html @templateEdit model: model\n        @tags = new TagsView\n            el: @$ '.tags'\n            model: @model\n        @tags.render()\n        @$(\".file-edit-name\").width width\n        @$(\".file-edit-name\").focus()\n\n        # we only want to select the part before the file extension\n        lastIndexOfDot = model.name.lastIndexOf '.'\n        lastIndexOfDot = model.name.length if lastIndexOfDot is -1\n        input = @$(\".file-edit-name\")[0]\n        if typeof input.selectionStart isnt \"undefined\"\n            input.selectionStart = 0\n            input.selectionEnd = lastIndexOfDot\n        else if document.selection && document.selection.createRange\n            # IE Branch...\n            input.select()\n            range = document.selection.createRange()\n            range.collapse true\n            range.moveEnd \"character\", lastIndexOfDot\n            range.moveStart \"character\", 0\n            range.select()\n\n        @$el.addClass 'edit-mode'\n\n    onShare: -> new ModalShareView model: @model\n\n    onSaveClicked: ->\n        name = @$('.file-edit-name').val()\n\n        if name and name isnt \"\"\n            @$el.removeClass 'edit-mode'\n            @model.save name: name,\n                wait: true,\n                success: (data) =>\n                    @render()\n                error: (model, err) =>\n                    @$('.file-edit-name').focus()\n                    @displayError if err.status is 400 then t 'modal error in use'\n                    else t 'modal error rename'\n\n        else\n            @displayError t(\"modal error empty name\")\n\n    onCancelClicked: ->\n        @$el.removeClass 'edit-mode'\n        if @model.isNew() then @model.destroy()\n        else @render()\n\n\n\n    # Display Move widget and handle move operation if user confirms.\n    onMoveClicked: =>\n        formTemplate = \"\"\"\n            <div class=\"move-widget\">\n            <span> #{t 'move element to'}: </span>\n            <select class=\"move-select\"></select>\n            <button class=\"button btn move-btn\">\n                #{t 'move'}\n            </button>\n            <button class=\"btn btn-link cancel-move-btn\">\n                #{t 'cancel'}\n            </button>\n            </div>\n        \"\"\"\n\n        errorTemplate = \"\"\"\n            <div class=\"move-error\">\n                <span class=\"error\">\n                #{'modal error file exists'}: #{@model.get 'name'}.\n                </span>\n            </div>\n        \"\"\"\n\n        movedTemplate = (path) ->\n            \"\"\"\n            <div id=\"moved-infos\">\n            <span>#{ t 'file successfully moved to'}: /#{path}.</span>\n            <button class=\"btn btn-link cancel-move-btn\">\n                #{t 'cancel'}\n            </button>\n            </div>\n        \"\"\"\n\n        optionTemplate =  (path) -> \"\"\"\n            <option value=\"#{path}\">#{path}</option>\n        \"\"\"\n\n        firstCell = @$el.find 'td:first-child'\n\n        client.get 'folders/list', (err, paths) =>\n            if err\n                Modal.error err\n            else\n                parentPath = @model.get 'path'\n                fullPath =  @model.getRepository()\n                type = @model.get 'type'\n\n                # Add root folder to list.\n                paths.push '/' if parentPath isnt  \"\"\n\n\n                # Fill folder combobox with folder list.\n                moveForm = $ formTemplate\n                for path in paths\n                    if path isnt parentPath \\\n                       and not(type is 'folder' and path.indexOf(fullPath) is 0)\n                        moveForm.find('select').append optionTemplate path\n\n                # Cancel move action on cancel clicked.\n                cancelButton =  moveForm.find(\".cancel-move-btn\")\n                cancelButton.click =>\n                    @$('.move-error').remove()\n                    moveForm.remove()\n\n                # Perform move operation on move clicked.\n                moveButton = moveForm.find(\".move-btn\")\n                moveButton.click =>\n\n                    # Show loading\n                    moveButton.html t \"moving...\"\n\n                    # Get path and url information.\n                    path = $(\".move-select\").val().substring 1\n                    id = @model.get 'id'\n                    previousPath = @model.get 'path'\n\n                    # Stop render sync.\n                    @stopListening @model\n                    window.app.socket.pause @model, null,\n                        ignoreMySocketNotification: true\n\n                    showMoveResult = =>\n                        moveForm.fadeOut()\n                        moveForm.remove()\n                        movedInfos = $ movedTemplate path\n                        firstCell.append movedInfos\n                        cancelButton =  movedInfos.find(\".cancel-move-btn\")\n                        movedInfos.click =>\n                            data = path: previousPath\n                            client.put \"#{type}s/#{id}\", data, (err) =>\n                                if err\n                                    ModalView.error t 'error occured canceling move'\n                                else\n                                    movedInfos.fadeOut()\n\n                    # Can't use Backbone model due to a weird sync\n                    # I can't figure out what is causing view to re-render.\n                    client.put \"#{type}s/#{id}\", path: path, (err) =>\n                        if err?\n                            firstCell.append errorTemplate\n                        else\n                            showMoveResult()\n\n                        # Put back synchronization.\n                        window.app.socket.resume @model, null,\n                            ignoreMySocketNotification: true\n                        @listenTo @model, 'change', @render\n\n                @$el.find('td:first-child').append moveForm\n\n\n    onKeyPress: (e) =>\n        if e.keyCode is 13\n            @onSaveClicked()\n        else if e.keyCode is 27\n            @render()\n\n    onSelectChanged: (event) ->\n        isChecked = $(event.target).is ':checked'\n        @$el.toggleClass 'selected', isChecked\n        @model.isSelected = isChecked\n\n        @onToggleSelect()\n        return true\n\n    onToggleSelect: ->\n        if @model.isSelected\n            @$('.file-move, .file-delete').addClass 'hidden'\n        else\n            @$('.file-move, .file-delete').removeClass 'hidden'\n\n    afterRender: ->\n        # if the file is being uploaded\n        if @model.isBeingUploaded()\n            @$('.type-column-cell').remove()\n            @$('.date-column-cell').remove()\n            @progressbar = new ProgressBar(model: @model)\n            cell = $('<td colspan=\"2\"></td>')\n            cell.append @progressbar.render().$el\n            @$('.size-column-cell').after cell\n            # we don't want the file link to react\n            @$('a.caption.btn').click (event) -> event.preventDefault()\n        else\n            @tags = new TagsView\n                el: @$('.tags')\n                model: @model\n            @tags.render()\n\n        # hides the file move and remove buttons if they are in a bulk selection\n        if @model.isSelected\n            @$('.file-move, .file-delete').addClass 'hidden'\n        else\n            @$('.file-move, .file-delete').removeClass 'hidden'\n\n        # if it's a folder and if it has children being uploaded\n        if @hasUploadingChildren\n            @$('.fa-folder').addClass 'spin'\n","ViewCollection = require '../lib/view_collection'\nFileView = require './file'\n\nmodule.exports = class FilesView extends ViewCollection\n    template: require './templates/files'\n    el: '#files'\n\n    itemview: FileView\n    collectionEl: '#table-items-body'\n\n    events:\n        'click #up-name'               : 'onChangeOrder'\n        'click #down-name'             : 'onChangeOrder'\n        'click #up-class'              : 'onChangeOrder'\n        'click #down-class'            : 'onChangeOrder'\n        'click #up-size'               : 'onChangeOrder'\n        'click #down-size'             : 'onChangeOrder'\n        'click #up-lastModification'   : 'onChangeOrder'\n        'click #down-lastModification' : 'onChangeOrder'\n\n    initialize: (options) ->\n        super options\n\n        @itemViewOptions = ->\n            isSearchMode: options.isSearchMode\n            uploadQueue: options.uploadQueue\n\n        @chevron = order: @collection.order, type: @collection.type\n\n    afterRender: ->\n        super()\n        @displayChevron @chevron.order, @chevron.type\n        @updateNbFiles()\n\n    updateNbFiles: ->\n        nbElements = @collection.length\n\n        if nbElements > 0\n            @$(\"#file-amount-indicator\").html t 'element',\n                                                smart_count: nbElements\n            @$(\"#file-amount-indicator\").show()\n            @$(\"#no-files-indicator\").hide()\n        else\n            @$(\"#file-amount-indicator\").hide()\n            @$(\"#no-files-indicator\").show()\n\n    # Helpers to display correct chevron to sort files\n    displayChevron: (order, type) ->\n\n        if order is \"asc\"\n            @$(\"#up-#{type}\").show()\n            @$(\"#down-#{type}\").hide()\n            @$(\"#up-#{type}\").removeClass 'unactive'\n        else\n            @$(\"#up-#{type}\").hide()\n            @$(\"#down-#{type}\").show()\n            @$(\"#down-#{type}\").removeClass 'unactive'\n\n\n    # Changer sorting depending on the clicked chevron.\n    onChangeOrder: (event) ->\n        infos = event.target.id.split '-'\n        order = infos[0]\n        type = infos[1]\n\n        order = if order is 'up' then 'desc' else 'asc'\n\n        @chevron = order: order, type: type\n        @collection.order = order\n        @collection.type = type\n        @collection.sort()\n","BaseView = require '../lib/base_view'\nFilesView = require './files'\nBreadcrumbsView = require \"./breadcrumbs\"\nUploadStatusView = require './upload_status'\nModal = require './modal'\nModalBulkMove = require './modal_bulk_move'\nModalShareView = null\n\nFile = require '../models/file'\n\n###\nHandles the display logic for a folder.\nMain entry point of the interface: handles breadcrumb, buttons and files list\n###\nmodule.exports = class FolderView extends BaseView\n\n    el: 'body'\n\n    template: require './templates/folder'\n\n    events: ->\n        'click #button-new-folder'     : 'onNewFolderClicked'\n        # 'click #button-upload-new-file': 'onUploadNewFileClicked'\n        'click #new-folder-send'       : 'onAddFolder'\n        'click #cancel-new-folder'     : 'onCancelFolder'\n        'click #cancel-new-file'       : 'onCancelFile'\n        'click #share-state'           : 'onShareClicked'\n        'click #download-link'         : 'onDownloadAsZipClicked'\n        'change #uploader': 'onFilesSelected'\n        'change #folder-uploader': 'onDirectorySelected'\n\n        'change #select-all': 'onSelectAllChanged'\n        'change input.selector': 'onSelectChanged'\n\n        'click #button-bulk-remove': 'bulkRemove'\n        'click #button-bulk-move'  : 'bulkMove'\n\n        'dragstart #files' : 'onDragStart'\n        'dragenter #files' : 'onDragEnter'\n        'dragover #files'  : 'onDragEnter'\n        'dragleave #files' : 'onDragLeave'\n        'drop #files'      : 'onDrop'\n\n        'keyup input#search-box'       : 'onSearchKeyPress'\n\n    initialize: (options) ->\n        super options\n        @baseCollection = options.baseCollection\n        @uploadQueue = options.uploadQueue\n\n        # not empty only if a search has started\n        @query = options.query\n\n        # prevent contacts loading in shared area\n        unless app.isPublic\n            ModalShareView ?= require \"./modal_share\"\n\n        # refresh folder action buttons after bulk actions\n        @listenTo @baseCollection, 'toggle-select', @toggleFolderActions\n        @listenTo @baseCollection, 'remove', @toggleFolderActions\n\n        return this\n\n    destroy: ->\n        # reset selection for each models\n        @collection.forEach (element) -> element.isSelected = false\n\n        # properly destroy subviews\n        @breadcrumbsView.destroy()\n        @breadcrumbsView = null\n        @filesList.destroy()\n        @filesList = null\n\n        super()\n\n    getRenderData: ->\n        supportsDirectoryUpload: @testEnableDirectoryUpload()\n        model: @model.toJSON()\n        query: @query\n        zipUrl: @model.getZipURL()\n\n    afterRender: ->\n        @uploadButton = @$ '#button-upload-new-file'\n\n        # breadcrumb management\n        @renderBreadcrumb()\n\n        # files list management\n        @renderFileList()\n\n        # upload status management\n        @renderUploadStatus()\n\n        # We make a reload after the view is displayed to update\n        # the client without degrading UX\n        @refreshData()\n\n    renderBreadcrumb: ->\n        @$('#crumbs').empty()\n        @breadcrumbsView = new BreadcrumbsView collection: @model.breadcrumb, model: @model\n        @$(\"#crumbs\").append @breadcrumbsView.render().$el\n\n    renderFileList: ->\n\n        @filesList = new FilesView\n                model: @model\n                collection: @collection\n                uploadQueue: @uploadQueue\n                isSearchMode: @model.get('type') is \"search\"\n\n        @filesList.render()\n\n    renderUploadStatus: ->\n        @uploadStatus = new UploadStatusView\n            collection: @uploadQueue\n\n        @uploadStatus.render().$el.appendTo @$('#upload-status-container')\n\n    spin: (state = 'small') -> @$(\"#loading-indicator\").spin state\n\n    # Refresh folder's content and manage spinner\n    refreshData: ->\n        @spin()\n        @baseCollection.getFolderContent @model, => @spin false\n\n    ###\n        Button handlers\n    ###\n\n    onNewFolderClicked: ->\n\n        if @newFolder\n            # there is already a new folder\n            @filesList.views[@newFolder.cid].$('.file-edit-name').focus()\n        else\n            @newFolder ?= new File\n                name: ''\n                type: 'folder'\n                path: @model.getRepository()\n\n            @baseCollection.add @newFolder\n            view = @filesList.views[@newFolder.cid]\n            view.onEditClicked()\n\n            @newFolder.once 'sync destroy', =>\n                @newFolder = null\n\n\n    onShareClicked: -> new ModalShareView model: @model\n\n    ###\n        Drag and Drop and Upload\n    ###\n    onDragStart: (e) ->\n        e.preventDefault()\n        e.stopPropagation()\n\n    onDragEnter: (e) ->\n        e.preventDefault()\n        e.stopPropagation()\n        if not @isPublic or @canUpload\n            @uploadButton.addClass 'btn-cozy-contrast'\n            @$('#files-drop-zone').show()\n\n    onDragLeave: (e) ->\n        e.preventDefault()\n        e.stopPropagation()\n        if not @isPublic or @canUpload\n            @uploadButton.removeClass 'btn-cozy-contrast'\n            @$('#files-drop-zone').hide()\n\n    onDrop: (e) ->\n        e.preventDefault()\n        e.stopPropagation()\n        return false if @isPublic and not @canUpload\n        @onFilesSelected e\n        @uploadButton.removeClass 'btn-cozy-contrast'\n        @$('#files-drop-zone').hide()\n\n    onDirectorySelected: (e) ->\n        input = @$ '#folder-uploader'\n        files = input[0].files\n        return unless files.length\n        @uploadQueue.addFolderBlobs files, @model\n        # reset the input\n        input.replaceWith input.clone true\n\n    onFilesSelected: (e) =>\n        files = e.dataTransfer?.files or e.target.files\n        return unless files.length\n        @uploadQueue.addBlobs files, @model\n        if e.target?\n            target = $ e.target\n            # reset the input\n            target.replaceWith target.clone true\n\n    ###\n        Search\n    ###\n    onSearchKeyPress: (e) ->\n        query = @$('input#search-box').val()\n\n        if query isnt ''\n            route = \"#search/#{query}\"\n        else\n            route = ''\n\n        window.app.router.navigate route, true\n\n    # Refreshes the view by changing the files list\n    # we basically re-do @initialize but only render file list\n    # to prevent the focus loss in the search field\n    updateSearch: (model, collection) ->\n        @stopListening @model\n        @stopListening @collection\n        @model = model\n        @collection = collection\n\n        $('#upload-buttons').hide()\n\n        # the first time the view is displayed, it doesn't exist yet\n        if @filesList?\n            @filesList.destroy()\n            # because destroying the view also removes the element\n            @$('#loading-indicator').after $ '<div id=\"files\"></div>'\n        @renderBreadcrumb()\n        @renderFileList()\n\n\n    ###\n        Select elements management\n    ###\n    onSelectAllChanged: (event) ->\n        isChecked = $(event.target).is ':checked'\n        @$('input.selector').prop 'checked', isChecked\n        @collection.forEach (element) ->\n            element.isSelected = isChecked\n            element.trigger 'toggle-select'\n\n        @$('tr.folder-row').toggleClass 'selected', isChecked\n\n        @toggleFolderActions()\n\n    onSelectChanged: -> @toggleFolderActions()\n\n    # Gets the number of selected elements from DOM\n    getSelectedElements: ->\n        return @collection.filter (element) ->\n            return element.isSelected? and element.isSelected\n\n    # we don't show the same actions wether there are selected elements or not\n    toggleFolderActions: ->\n        selectedElements = @getSelectedElements()\n        if selectedElements.length > 0\n            @$('#share-state').hide()\n            @$('#upload-btngroup').hide()\n            @$('#button-new-folder').hide()\n            @$('#bulk-actions-btngroup').addClass 'enabled'\n        else\n            @$('#share-state').show()\n            @$('#upload-btngroup').show()\n            @$('#button-new-folder').show()\n            @$('#bulk-actions-btngroup').removeClass 'enabled'\n\n        # we check the \"select-all\" checkbox if there are few elements selected\n        @$('input#select-all').prop 'checked', selectedElements.length >= 3\n\n\n    ###\n        Bulk actions management\n    ###\n    bulkRemove: ->\n        new Modal t(\"modal are you sure\"), t(\"modal delete msg\"), t(\"modal delete ok\"), t(\"modal cancel\"), (confirm) =>\n            if confirm\n                async.eachLimit @getSelectedElements(), 10, (element, cb) ->\n                    element.destroy error: -> cb()\n                , (err) ->\n                    Modal.error t(\"modal delete error\")\n\n    bulkMove: ->\n        new ModalBulkMove\n            collection: @getSelectedElements()\n            parentPath: @model.getRepository()\n\n    ###\n        Misc\n    ###\n    testEnableDirectoryUpload: ->\n        input = $('<input type=\"file\">')[0]\n        supportsDirectoryUpload = input.directory? or\n                                  input.mozdirectory? or\n                                  input.webkitdirectory? or\n                                  input.msdirectory?\n        return supportsDirectoryUpload\n\n    # We don't want the user to download the ZIP if the folder is empty\n    onDownloadAsZipClicked: (event) ->\n        if @collection.length is 0\n            event.preventDefault()\n            Modal.error t 'modal error zip empty folder'\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class ModalView extends BaseView\n\n    id: \"dialog-modal\"\n    className: \"modal fade\"\n    attributes:\n        'tab-index': -1\n    template: require './templates/modal'\n    value: 0\n\n    events: ->\n        \"click #modal-dialog-no\"  : \"onNo\"\n        \"click #modal-dialog-yes\" : \"onYes\"\n\n    constructor: (@title, @msg, @yes, @no, @cb, @hideOnYes) ->\n        super()\n        @hideOnYes = true unless @hideOnYes?\n\n    initialize: ->\n        @$el.on 'hidden.bs.modal', => @close()\n\n        @render()\n        @show()\n\n    onYes: ->\n        @cb true if @cb\n        @hide()\n\n    onNo: ->\n        @cb false if @cb\n        @hide() if @hideOnYes\n\n    onShow: ->\n\n    close: ->\n        setTimeout (() => @destroy()), 500\n\n    show: ->\n        @$el.modal 'show'\n        @$el.trigger 'show'\n\n    hide: ->\n        @$el.modal 'hide'\n        @$el.trigger 'hide'\n\n    render: ->\n        @$el.append @template(title: @title, msg: @msg, yes: @yes, no: @no)\n        $(\"body\").append @$el\n        @afterRender()\n        @\n\nmodule.exports.error = (code, cb) ->\n    new ModalView t(\"modal error\"), code, t(\"modal ok\"), false, cb\n","Modal = require \"./modal\"\nclient = require \"../lib/client\"\n\nmodule.exports = class ModalBulkMoveView extends Modal\n\n    formTemplate: -> \"\"\"\n            <div class=\"move-widget\">\n            <span> #{t 'move elements to'}: </span>\n            <select class=\"move-select\"></select>\n            </div>\n    \"\"\"\n\n    movedTemplate: (path) ->\n        \"\"\"\n        <div id=\"moved-infos\">\n        <span>#{ t 'elements successfully moved to'}: /#{path}.</span>\n        <button class=\"btn btn-link cancel-move-btn\">\n            #{t 'cancel'}\n        </button>\n        </div>\n    \"\"\"\n\n    optionTemplate: (path) -> \"\"\"\n        <option value=\"#{path}\">#{path}</option>\n    \"\"\"\n\n    constructor: (options) ->\n\n        super t('moving selected elements'), '', t('move'), t('close')\n\n        # collection is the selected elements\n        @collection = options.collection\n        @parentPath = options.parentPath\n\n    afterRender: () ->\n        # retrieve list of all folders\n        client.get 'folders/list', (err, paths) =>\n            if err?\n                Modal.error err\n            else\n                # Add root folder to list.\n                paths.push '/' if @parentPath isnt  \"\"\n\n                # generate the list of paths where elements cannot be moved\n                # this list is composed of the selected folders\n                forbiddenPaths = @collection\n                    .filter (element) -> element.isFolder()\n                    .map (element) -> element.getRepository()\n\n                allowedPaths = _.filter paths, (path) =>\n                    # we append a / to prevent issue where folders\n                    # share the same prefix\n                    testedPath = path + '/'\n\n                    # if the path is a child of one of the forbidden paths\n                    # or the parent path, then it should not be displayed\n                    isAllowed = not _.some forbiddenPaths, (forbiddenPath) ->\n                        testedPath.indexOf(forbiddenPath) is 0\n\n                    return isAllowed and path isnt @parentPath\n\n                # Fill folder combobox with folder list.\n                @moveForm = $ @formTemplate()\n                for path in allowedPaths\n                    @moveForm.find('select').append @optionTemplate path\n\n                @$el.find('.modal-body').append @moveForm\n\n    onYes: ->\n        # Shows loading indicator\n        @$('#modal-dialog-yes').html t 'moving...'\n\n        # Gets the new path\n        newPath = $('.move-select').val().substring 1\n        previousPath = @parentPath\n\n        @bulkUpdate newPath, (err) =>\n            # Hides loading indicator\n            @$('#modal-dialog-yes').hide()\n\n            if err?\n                # Shows an error\n                Modal.error t 'modal error file exists'\n            else\n                # Shows the success form\n                @moveForm.fadeOut => @moveForm.remove()\n                movedInfos = $ @movedTemplate newPath\n\n                # Cancel handler\n                cancelButton =  movedInfos.find '.cancel-move-btn'\n                cancelButton.click =>\n                    @bulkUpdate previousPath, (err) =>\n                        if err?\n                            Modal.error t 'error occured canceling move'\n                        else\n                            @onNo()\n\n                @$el.find('.modal-body').append movedInfos\n\n    # When the modal is being closed, we unselect all selected files\n    onNo: ->\n        @clearSelection()\n        super()\n\n    clearSelection: ->\n        @collection.forEach (element) ->\n            element.isSelected = false\n            element.trigger 'toggle-select'\n\n    # Process the update for all the selected elements\n    bulkUpdate: (newPath, callback) ->\n\n        # Process the update 10 by 10\n        async.eachLimit @collection, 10, (model, cb) ->\n            id = model.get 'id'\n            type = model.get 'type'\n            client.put \"#{type}s/#{id}\", path: newPath, cb\n        , callback\n","BaseView = require '../lib/base_view'\nModal = require \"./modal\"\nclient = require \"../lib/client\"\nCozyClearanceModal = require \"cozy-clearance/modal_share_view\"\n\n# extends the cozy-clearance modal to files specifics\nmodule.exports = class ModalShareView extends CozyClearanceModal\n\n    # display inherited details on summary's click\n    events: -> _.extend super,\n        'click #inherited-share-summary a': =>\n            @$('#inherited-share-list').show()\n            @$('#inherited-share-summary').hide()\n\n    # retrieve inherited rules\n    initialize: (options) ->\n        @type = @model.get('type')\n        super\n        @summaryemails = []\n        client.get \"clearance/#{@model.id}\", (err, data) =>\n            if err\n                Modal.error 'server error occured', => @$el.modal 'hide'\n            else\n                @inherited = data.inherited\n                last = _.last @inherited\n                @forcedPublic = last.name if last?.clearance is 'public'\n\n                # actually render content\n                @refresh()\n\n    # allow rw permissions for folder, customize message depending on type\n    permissions: ->\n        if @type is 'folder'\n            'r': 'perm r folder'\n            'rw': 'perm rw folder'\n        else\n            'r': t 'perm r file'\n\n    # do not allow adding permissions for user who already have them by inheritance\n    typeaheadFilter: (item) =>\n        email = item.toString().split(';')[0]\n        super and email not in @summaryemails\n\n    # force 'public' display if forced public by inheritance\n    getRenderData: ->\n        out = super\n        out.clearance = 'public' if @forcedPublic\n        return out\n\n    # ignore click on 'public' button when forced public by inheritance\n    makePublic: ->\n        return if @forcedPublic\n        super\n\n    # support forced public by inheritance and add inherited summary\n    afterRender: () ->\n        super\n\n        if @forcedPublic\n            text = t('forced public') + @forcedPublic\n            @$('#share-public').addClass 'toggled'\n            @$('#share-private').hide().after $('<p>').text text\n        else\n            listitems = []\n            summary = []\n\n            for folder in @inherited when folder.clearance.length isnt 0\n                text = t('inherited from') + folder.name\n                listitems.push $('<li>').addClass('header').text text\n                for rule in folder.clearance\n                    summary.push rule.email\n                    listitems.push $('<li>').text rule.email\n\n            if summary.length isnt 0\n                @summaryemails = summary\n                text = t('also have access') + ' : ' + summary.join(', ') + '. '\n                summary = $('<div id=\"inherited-share-summary\">').text text\n                summary.append $('<a>').text t('details')\n                list = $('<ul id=\"inherited-share-list\">').hide()\n                list.append item for item in listitems\n                @$('#share-list').after summary, list\n\n        # if there is a writing guest\n        guestCanWrite = _.findWhere @model.get('clearance'), perm: 'rw'\n        if guestCanWrite\n            checkbox = $('<input id=\"notifs\" type=\"checkbox\">')\n            checkbox.prop 'checked', @model.get 'changeNotification'\n            text = t('change notif')\n            html = '<label class=\"notifs-label\" for=\"notifs\">'\n            label = $(html).append checkbox, text\n            @$('#share-list').after label\n\n\n    # include the changes notification in PUT request\n    saveData: ->\n        changeNotification = @$('#notifs').prop('checked') or false\n        _.extend super, changeNotification: changeNotification\n","FolderView = require './folder'\nclient = require '../lib/client'\n\nmodule.exports = class PublicFolderView extends FolderView\n\n    events: -> _.extend super,\n        'click #notifications': 'onToggleNotificationClicked'\n\n\n    initialize: (options) ->\n        super options\n        @rootFolder = options.rootFolder\n\n    afterRender: ->\n        super()\n\n        # we use those class to show/hide stuff via CSS (buttons, controls, etc.)\n        classes = ' public'\n        classes += ' can-upload' if @rootFolder.canUpload\n        @$el.addClass classes\n\n    getRenderData: ->\n        _.extend super(),\n            isPublic: true\n            areNotificationsEnabled: @rootFolder.publicNotificationsEnabled\n            hasPublicKey: @rootFolder.publicKey.length > 0\n\n    # Enable or disable guest notifications\n    onToggleNotificationClicked: ->\n\n        # Notifications are only handled for the root folder\n        key = window.location.search\n        url = \"#{@model.urlRoot()}#{@rootFolder.id}/notifications#{key}\"\n\n        # toggle notifications button and persist state in database\n        if @rootFolder.publicNotificationsEnabled\n            @rootFolder.publicNotificationsEnabled = false\n            @$('#notifications').html '&nbsp;'\n            @$('#notifications').spin 'tiny'\n            client.put url, notificationsState: false, (err) =>\n                @$('#notifications').spin false\n                unless err?\n                    @$('#notifications').html t 'notifications disabled'\n                    @$('#notifications').removeClass 'toggled'\n        else\n            @rootFolder.publicNotificationsEnabled = true\n            @$('#notifications').html '&nbsp;'\n            @$('#notifications').spin 'tiny'\n            client.put url, notificationsState: true, (err) =>\n                @$('#notifications').spin false\n                unless err?\n                    @$('#notifications').html t 'notifications enabled'\n                    @$('#notifications').addClass 'toggled'","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model;\nif ( model.id == \"root\")\n{\nbuf.push(\"<li><a href=\\\"#\\\"><span class=\\\"glyphicon glyphicon-home\\\"></span></a></li>\");\n}\nelse\n{\nif ( model.type == \"search\")\n{\nbuf.push(\"<li><a\" + (jade.attr(\"href\", \"#search/\" + (model.id) + \"\", true, false)) + \">\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</a></li>\");\n}\nelse\n{\nbuf.push(\"<li><a\" + (jade.attr(\"href\", \"#folders/\" + (model.id) + \"\", true, false)) + \">\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</a></li>\");\n}\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model,attachmentUrl = locals_.attachmentUrl,isBeingUploaded = locals_.isBeingUploaded,downloadUrl = locals_.downloadUrl,options = locals_.options;\nbuf.push(\"<td><div class=\\\"spinholder\\\">&nbsp;</div><div class=\\\"caption-wrapper\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<div class=\\\"caption btn btn-link\\\"><input type=\\\"checkbox\\\" class=\\\"selector\\\"/><i class=\\\"fa fa-folder\\\"></i><a\" + (jade.attr(\"href\", \"#folders/\" + (model.id) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (t('open folder')) + \"\", true, false)) + \" class=\\\"btn-link\\\"><span>\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</span></a></div>\");\n}\nelse if ( model.type == 'file')\n{\nbuf.push(\"<div class=\\\"caption btn btn-link\\\"><input type=\\\"checkbox\\\" class=\\\"selector\\\"/>\");\nif ( model.mime && this.mimeClasses[model.mime])\n{\nbuf.push(\"<i\" + (jade.cls([\"fa \" + (this.mimeClasses[model.mime]) + \"\"], [true])) + \"></i>\");\n}\nelse\n{\nbuf.push(\"<i class=\\\"fa fa-file-o\\\"></i>\");\n}\nbuf.push(\"<a\" + (jade.attr(\"href\", \"\" + (attachmentUrl) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (t('download file')) + \"\", true, false)) + \" target=\\\"_blank\\\" class=\\\"btn-link\\\"><span>\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</span></a></div>\");\n}\nbuf.push(\"<ul class=\\\"tags\\\">\");\n// iterate model.tags || []\n;(function(){\n  var $$obj = model.tags || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul>\");\nif ( !isBeingUploaded)\n{\nbuf.push(\"<div class=\\\"operations\\\"><a\" + (jade.attr(\"title\", \"\" + (t('tooltip share')) + \"\", true, false)) + \" class=\\\"file-share\\\">\");\nif ( model.clearance == 'public')\n{\nbuf.push(\"<span class=\\\"fa fa-globe\\\"></span>\");\n}\nelse if ( model.clearance && model.clearance.length > 0)\n{\nbuf.push(\"<span class=\\\"fa fa-users\\\">\" + (jade.escape((jade_interp = model.clearance.length) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"fa fa-lock\\\"></span>\");\n}\nbuf.push(\"</a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip edit')) + \"\", true, false)) + \" class=\\\"file-edit\\\"><span class=\\\"glyphicon glyphicon-edit\\\"></span></a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip move')) + \"\", true, false)) + \" class=\\\"file-move\\\"><span class=\\\"glyphicon glyphicon-arrow-right\\\"></span></a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip delete')) + \"\", true, false)) + \" class=\\\"file-delete\\\"><span class=\\\"glyphicon glyphicon-remove-circle\\\"></span></a><a\" + (jade.attr(\"href\", \"\" + (downloadUrl) + \"\", true, false)) + \" target=\\\"_blank\\\"\" + (jade.attr(\"title\", \"\" + (t('tooltip download')) + \"\", true, false)) + \" class=\\\"file-download\\\"><span class=\\\"glyphicon glyphicon-cloud-download\\\"></span></a></div>\");\n}\nbuf.push(\"</div><!-- empty by default--></td><td class=\\\"size-column-cell\\\">\");\nif ( model.type == 'file')\n{\noptions = {base: 2}\nbuf.push(\"<span>\" + (jade.escape((jade_interp = filesize(model.size || 0, options)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"type-column-cell\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t('folder')) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t(model.class)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"date-column-cell\\\">\");\nif ( model.lastModification)\n{\nbuf.push(\"<span>\" + (jade.escape((jade_interp = moment(model.lastModification).calendar()) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model,options = locals_.options;\nbuf.push(\"<td><div class=\\\"spinholder\\\">&nbsp;</div><div class=\\\"caption-wrapper\\\"><span class=\\\"caption caption-edit btn-link\\\">\");\nif ( model.type && model.type == \"folder\")\n{\nbuf.push(\"<i class=\\\"fa fa-folder\\\"></i>\");\n}\nelse\n{\nbuf.push(\"<i class=\\\"fa fa-file-o\\\"></i>\");\n}\nbuf.push(\"<input\" + (jade.attr(\"value\", model.name, true, false)) + \" class=\\\"caption file-edit-name\\\"/></span><a class=\\\"btn btn-sm btn-cozy file-edit-save\\\">\" + (jade.escape((jade_interp = t(\"file edit save\")) == null ? '' : jade_interp)) + \"</a><a class=\\\"btn btn-sm btn-link file-edit-cancel\\\">\" + (jade.escape((jade_interp = t(\"file edit cancel\")) == null ? '' : jade_interp)) + \"</a><ul class=\\\"tags\\\">\");\n// iterate model.tags || []\n;(function(){\n  var $$obj = model.tags || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul><!-- empty!--></div><!-- empty by default--></td><td class=\\\"size-column-cell\\\">\");\nif ( model.type == 'file')\n{\noptions = {base: 2}\nbuf.push(\"<span>\" + (jade.escape((jade_interp = filesize(model.size || 0, options)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"type-column-cell\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t('folder')) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t(model.class)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"date-column-cell\\\">\");\nif ( model.lastModification)\n{\nbuf.push(\"<span>\" + (jade.escape((jade_interp = moment(model.lastModification).calendar()) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model,attachmentUrl = locals_.attachmentUrl,isBeingUploaded = locals_.isBeingUploaded,downloadUrl = locals_.downloadUrl,options = locals_.options;\nbuf.push(\"<td><div class=\\\"spinholder\\\">&nbsp;</div><div class=\\\"caption-wrapper\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<div class=\\\"caption btn btn-link\\\"><input type=\\\"checkbox\\\" class=\\\"selector\\\"/><i class=\\\"fa fa-folder\\\"></i><a\" + (jade.attr(\"href\", \"#folders/\" + (model.id) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (t('open folder')) + \"\", true, false)) + \" class=\\\"btn-link\\\"><span>\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</span></a></div>\");\n}\nelse if ( model.type == 'file')\n{\nbuf.push(\"<div class=\\\"caption btn btn-link\\\"><input type=\\\"checkbox\\\" class=\\\"selector\\\"/>\");\nif ( model.mime && this.mimeClasses[model.mime])\n{\nbuf.push(\"<i\" + (jade.cls([\"fa \" + (this.mimeClasses[model.mime]) + \"\"], [true])) + \"></i>\");\n}\nelse\n{\nbuf.push(\"<i class=\\\"fa fa-file-o\\\"></i>\");\n}\nbuf.push(\"<a\" + (jade.attr(\"href\", \"\" + (attachmentUrl) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (t('download file')) + \"\", true, false)) + \" target=\\\"_blank\\\" class=\\\"btn-link\\\"><span>\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</span></a></div>\");\n}\nbuf.push(\"<ul class=\\\"tags\\\">\");\n// iterate model.tags || []\n;(function(){\n  var $$obj = model.tags || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var tag = $$obj[$index];\n\nbuf.push(\"<li class=\\\"tag\\\">\" + (jade.escape((jade_interp = tag) == null ? '' : jade_interp)) + \"<span class=\\\"deleter\\\">&times;</span></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul>\");\nif ( !isBeingUploaded)\n{\nbuf.push(\"<div class=\\\"operations\\\"><a\" + (jade.attr(\"title\", \"\" + (t('tooltip share')) + \"\", true, false)) + \" class=\\\"file-share\\\">\");\nif ( model.clearance == 'public')\n{\nbuf.push(\"<span class=\\\"fa fa-globe\\\"></span>\");\n}\nelse if ( model.clearance && model.clearance.length > 0)\n{\nbuf.push(\"<span class=\\\"fa fa-users\\\">\" + (jade.escape((jade_interp = model.clearance.length) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"fa fa-lock\\\"></span>\");\n}\nbuf.push(\"</a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip edit')) + \"\", true, false)) + \" class=\\\"file-edit\\\"><span class=\\\"glyphicon glyphicon-edit\\\"></span></a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip move')) + \"\", true, false)) + \" class=\\\"file-move\\\"><span class=\\\"glyphicon glyphicon-arrow-right\\\"></span></a><a\" + (jade.attr(\"title\", \"\" + (t('tooltip delete')) + \"\", true, false)) + \" class=\\\"file-delete\\\"><span class=\\\"glyphicon glyphicon-remove-circle\\\"></span></a><a\" + (jade.attr(\"href\", \"\" + (downloadUrl) + \"\", true, false)) + \" target=\\\"_blank\\\"\" + (jade.attr(\"title\", \"\" + (t('tooltip download')) + \"\", true, false)) + \" class=\\\"file-download\\\"><span class=\\\"glyphicon glyphicon-cloud-download\\\"></span></a></div>\");\n}\nbuf.push(\"</div><p class=\\\"file-path\\\">\" + (jade.escape((jade_interp = model.path) == null ? '' : jade_interp)) + \"/\" + (jade.escape((jade_interp = model.name) == null ? '' : jade_interp)) + \"</p></td><td class=\\\"size-column-cell\\\">\");\nif ( model.type == 'file')\n{\noptions = {base: 2}\nbuf.push(\"<span>\" + (jade.escape((jade_interp = filesize(model.size || 0, options)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"type-column-cell\\\">\");\nif ( model.type == 'folder')\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t('folder')) == null ? '' : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"pull-left\\\">\" + (jade.escape((jade_interp = t(model.class)) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td><td class=\\\"date-column-cell\\\">\");\nif ( model.lastModification)\n{\nbuf.push(\"<span>\" + (jade.escape((jade_interp = moment(model.lastModification).calendar()) == null ? '' : jade_interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model;\nbuf.push(\"<table id=\\\"table-items\\\" class=\\\"table table-hover\\\"><thead><tr class=\\\"table-headers\\\"><td><input id=\\\"select-all\\\" type=\\\"checkbox\\\"/><span>\" + (jade.escape(null == (jade_interp = t('name')) ? \"\" : jade_interp)) + \"</span><a id=\\\"down-name\\\" class=\\\"btn glyphicon glyphicon-chevron-down unactive\\\"></a><a id=\\\"up-name\\\" class=\\\"btn glyphicon glyphicon-chevron-up unactive\\\"></a></td><td class=\\\"size-column-cell\\\"><span>\" + (jade.escape(null == (jade_interp = t('size')) ? \"\" : jade_interp)) + \"</span><a id=\\\"down-size\\\" class=\\\"glyphicon glyphicon-chevron-down btn unactive\\\"></a><a id=\\\"up-size\\\" class=\\\"unactive btn glyphicon glyphicon-chevron-up unactive\\\"></a></td><td class=\\\"type-column-cell\\\"><span>\" + (jade.escape(null == (jade_interp = t('type')) ? \"\" : jade_interp)) + \"</span><a id=\\\"down-class\\\" class=\\\"btn glyphicon glyphicon-chevron-down unactive\\\"></a><a id=\\\"up-class\\\" class=\\\"glyphicon glyphicon-chevron-up btn unactive\\\"></a></td><td class=\\\"date-column-cell\\\"><span>\" + (jade.escape(null == (jade_interp = t('date')) ? \"\" : jade_interp)) + \"</span><a id=\\\"down-lastModification\\\" class=\\\"btn glyphicon glyphicon-chevron-down unactive\\\"></a><a id=\\\"up-lastModification\\\" class=\\\"btn glyphicon glyphicon-chevron-up unactive\\\"></a></td></tr></thead><tbody id=\\\"table-items-body\\\"></tbody></table><p id=\\\"file-amount-indicator\\\" class=\\\"footer\\\"></p><p id=\\\"no-files-indicator\\\" class=\\\"footer\\\">\");\nif ( model.type == 'search')\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('no file in search')) == null ? '' : jade_interp)) + \"\");\n}\nelse\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('no file in folder')) == null ? '' : jade_interp)) + \"\");\n}\nbuf.push(\"</p>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),isPublic = locals_.isPublic,hasPublicKey = locals_.hasPublicKey,query = locals_.query,model = locals_.model,supportsDirectoryUpload = locals_.supportsDirectoryUpload,areNotificationsEnabled = locals_.areNotificationsEnabled,zipUrl = locals_.zipUrl;\nbuf.push(\"<div id=\\\"affixbar\\\" data-spy=\\\"affix\\\" data-offset-top=\\\"1\\\"><div class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-lg-12\\\"><div id=\\\"crumbs\\\" class=\\\"pull-left\\\"></div><div class=\\\"pull-right\\\">\");\nif ( !isPublic || hasPublicKey)\n{\nbuf.push(\"<input id=\\\"search-box\\\" type=\\\"search\\\"\" + (jade.attr(\"value\", \"\" + (query) + \"\", true, false)) + \" class=\\\"pull-right\\\"/>\");\n}\nif ( model.type != 'search')\n{\nbuf.push(\"<div id=\\\"upload-buttons\\\" class=\\\"pull-right\\\">\");\nif ( model.id != 'root')\n{\nbuf.push(\"<a id=\\\"share-state\\\" class=\\\"btn btn-cozy btn-cozy-contrast\\\">\");\nif ( model.clearance == 'public')\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('public')) == null ? '' : jade_interp)) + \"<span class=\\\"fa fa-globe\\\"></span>\");\n}\nelse if ( model.clearance && model.clearance.length > 0)\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('shared')) == null ? '' : jade_interp)) + \"<span class=\\\"fa fa-users\\\"></span><span>\" + (jade.escape(null == (jade_interp = model.clearance.length) ? \"\" : jade_interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"\" + (jade.escape((jade_interp = t('private')) == null ? '' : jade_interp)) + \"<span class=\\\"fa fa-lock\\\"></span>\");\n}\nbuf.push(\"</a>&nbsp;\");\n}\nbuf.push(\"<div id=\\\"upload-btngroup\\\" class=\\\"btn-group\\\"><a id=\\\"button-upload-new-file\\\"\" + (jade.attr(\"title\", t('upload button'), true, false)) + \" class=\\\"btn btn-cozy btn-cozy\\\"><input id=\\\"uploader\\\" type=\\\"file\\\" multiple=\\\"multiple\\\"/><img src=\\\"images/add-file.png\\\"/></a>\");\nif ( supportsDirectoryUpload)\n{\nbuf.push(\"<a data-toggle=\\\"dropdown\\\" class=\\\"btn btn-cozy dropdown-toggle\\\"><span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\"><li><a id=\\\"button-upload-folder\\\"><input id=\\\"folder-uploader\\\" type=\\\"file\\\" directory=\\\"directory\\\" mozdirectory=\\\"mozdirectory\\\" webkitdirectory=\\\"webkitdirectory\\\"/><span>Upload a folder</span></a></li></ul>\");\n}\nbuf.push(\"</div>&nbsp;<a id=\\\"button-new-folder\\\"\" + (jade.attr(\"title\", t('new folder button'), true, false)) + \" class=\\\"btn btn-cozy\\\"><img src=\\\"images/add-folder.png\\\"/></a><div id=\\\"bulk-actions-btngroup\\\" class=\\\"btn-group\\\"><a id=\\\"button-bulk-move\\\" class=\\\"btn btn-cozy btn-cozy\\\">Move all&nbsp;<span class=\\\"glyphicon glyphicon-arrow-right\\\"></span></a><a id=\\\"button-bulk-remove\\\" class=\\\"btn btn-cozy btn-cozy\\\">Remove all&nbsp;<span class=\\\"glyphicon glyphicon-remove-circle\\\"></span></a></div></div>\");\nif ( isPublic && hasPublicKey)\n{\nif ( areNotificationsEnabled)\n{\nbuf.push(\"<a id=\\\"notifications\\\" class=\\\"btn btn-cozy toggled\\\">\" + (jade.escape(null == (jade_interp = t('notifications enabled')) ? \"\" : jade_interp)) + \"</a>\");\n}\nelse\n{\nbuf.push(\"<a id=\\\"notifications\\\" class=\\\"btn btn-cozy\\\">\" + (jade.escape(null == (jade_interp = t('notifications disabled')) ? \"\" : jade_interp)) + \"</a>\");\n}\nbuf.push(\"&nbsp;\");\n}\nbuf.push(\"<a id=\\\"download-link\\\"\" + (jade.attr(\"href\", \"\" + (zipUrl) + \"\", true, false)) + (jade.attr(\"title\", t(\"download\"), true, false)) + \" class=\\\"btn btn-cozy-contrast\\\">\" + (jade.escape((jade_interp = t(\"download\")) == null ? '' : jade_interp)) + \"&nbsp;<i class=\\\"icon-arrow-down icon-white\\\"></i></a>\");\n}\nbuf.push(\"</div></div></div><div class=\\\"row\\\"><div id=\\\"upload-status-container\\\" class=\\\"col-lg-12\\\"></div></div></div></div><div class=\\\"container\\\"><div class=\\\"row\\\"><div id=\\\"content\\\" class=\\\"col-lg-12\\\"><div id=\\\"loading-indicator\\\">&nbsp;</div><div id=\\\"files\\\"></div><div id=\\\"files-drop-zone\\\"><div class=\\\"overlay\\\"></div><div class=\\\"vertical-container\\\"><p>\" + (jade.escape(null == (jade_interp = t('drop message')) ? \"\" : jade_interp)) + \"</p></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),title = locals_.title,msg = locals_.msg,no = locals_.no,yes = locals_.yes;\nbuf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><button type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"close\\\">×</button><h4 class=\\\"modal-title\\\">\" + (jade.escape((jade_interp = title) == null ? '' : jade_interp)) + \"</h4></div><div class=\\\"modal-body\\\"><p>\" + (jade.escape((jade_interp = msg) == null ? '' : jade_interp)) + \"</p></div><div class=\\\"modal-footer\\\">\");\nif ( no)\n{\nbuf.push(\"<button id=\\\"modal-dialog-no\\\" type=\\\"button\\\" class=\\\"btn btn-link\\\">\" + (jade.escape((jade_interp = no) == null ? '' : jade_interp)) + \"</button>\");\n}\nif ( yes)\n{\nbuf.push(\"<button id=\\\"modal-dialog-yes\\\" type=\\\"button\\\" class=\\\"btn btn-cozy\\\">\" + (jade.escape((jade_interp = yes) == null ? '' : jade_interp)) + \"</button>\");\n}\nbuf.push(\"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><button type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"close\\\">×</button><h4 class=\\\"modal-title\\\">\" + (jade.escape((jade_interp = t(\"new folder caption\")) == null ? '' : jade_interp)) + \"</h4></div><div class=\\\"modal-body\\\"><fieldset><div class=\\\"form-group\\\"><label for=\\\"inputName\\\">\" + (jade.escape((jade_interp = t(\"new folder msg\")) == null ? '' : jade_interp)) + \"</label><input id=\\\"inputName\\\" type=\\\"text\\\" class=\\\"form-control\\\"/></div><div id=\\\"folder-upload-form\\\" class=\\\"form-group hide\\\"><br/><p class=\\\"text-center\\\">\" + (jade.escape(null == (jade_interp = t('upload folder separator')) ? \"\" : jade_interp)) + \"</p><label for=\\\"inputName\\\">\" + (jade.escape((jade_interp = t(\"upload folder msg\")) == null ? '' : jade_interp)) + \"</label><input id=\\\"folder-uploader\\\" type=\\\"file\\\" directory=\\\"directory\\\" mozdirectory=\\\"mozdirectory\\\" webkitdirectory=\\\"webkitdirectory\\\" class=\\\"form-control\\\"/></div></fieldset></div><div class=\\\"modal-footer\\\"><button id=\\\"modal-dialog-no\\\" type=\\\"button\\\" data-dismiss=\\\"modal\\\" class=\\\"btn btn-link\\\">\" + (jade.escape((jade_interp = t(\"new folder close\")) == null ? '' : jade_interp)) + \"</button><button id=\\\"modal-dialog-yes\\\" type=\\\"button\\\" disabled=\\\"disabled\\\" class=\\\"btn btn-cozy-contrast\\\">\" + (jade.escape((jade_interp = t(\"new folder send\")) == null ? '' : jade_interp)) + \"</button></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),value = locals_.value;\nbuf.push(\"<div class=\\\"progress active\\\"><div role=\\\"progressbar\\\"\" + (jade.attr(\"aria-valuenow\", \"\" + (value) + \"\", true, false)) + \" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\"\" + (jade.attr(\"style\", \"width: \" + (value) + \"%\", true, false)) + \" class=\\\"progress-bar progress-bar-info\\\">\" + (jade.escape((jade_interp = value) == null ? '' : jade_interp)) + \"%</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),value = locals_.value;\nbuf.push(\"<span>Upload en cours. Ne quittez pas votre navigateur.</span><div id=\\\"dismiss\\\" class=\\\"btn btn-cozy pull-right\\\">\" + (jade.escape(null == (jade_interp = t('ok')) ? \"\" : jade_interp)) + \"</div><div class=\\\"progress active pull-right\\\"><div\" + (jade.attr(\"style\", \"width: \" + value, true, false)) + \" class=\\\"progress-bar progress-bar-info\\\"></div><div class=\\\"progress-bar progress-bar-content\\\">\" + (jade.escape((jade_interp = t('total progress')) == null ? '' : jade_interp)) + \" \" + (jade.escape((jade_interp = value) == null ? '' : jade_interp)) + \"</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","BaseView = require '../lib/base_view'\nFile = require '../models/file'\nProgressBar = require '../widgets/progressbar'\n\nUploadedFileView = require './uploaded_file_view'\n\nmodule.exports = class UploadStatusView extends BaseView\n\n    id: \"upload-status\"\n    template: require './templates/upload_status'\n\n    events: ->\n        'click #dismiss': 'resetCollection'\n\n    initialize: ->\n        super\n        @listenTo @collection, 'add', @uploadCount\n        @listenTo @collection, 'remove', @uploadCount\n        @listenTo @collection, 'reset', @render\n        @listenTo @collection, 'upload-progress', @progress\n        @listenTo @collection, 'upload-complete', @complete\n\n    getRenderData: ->\n        e = @collection.progress\n        value = if e then parseInt(100 * e.loadedBytes / e.totalBytes) + '%'\n        else '0 %'\n\n        return data =\n            value: value\n            collection: @collection\n\n    progress: (e) ->\n        @$el.removeClass 'success danger warning'\n        percentage = parseInt(100 * e.loadedBytes / e.totalBytes) + '%'\n        @progressbar.width percentage\n        @progressbarContent.text \"#{t('total progress')} : #{percentage}\"\n\n    complete: ->\n        @$('.progress').remove()\n        @dismiss.show()\n\n        result = @collection.getResults()\n        @$el.addClass result.status\n        @$('span').text [\n            if result.success\n                t 'upload complete', smart_count: result.success\n            if result.existing.length\n                @makeExistingSentence result.existing\n\n            if result.error.length\n                @makeErrorSentence result.error\n        ].join ' '\n\n    # generate a sentence explaining existing files\n    makeExistingSentence: (existing) ->\n        parts = [existing[0].get('name')]\n        if existing.length > 1\n            parts.push t('and x files', smart_count: existing.length - 1)\n        parts.push t 'already exists'\n\n        return parts.join ' '\n\n    # generate a sentence explaining error files\n    makeErrorSentence: (errors) ->\n        console.log errors\n        parts = [] #[errors[0].get('name')]\n        if errors.length > 1\n            parts.push t('and x files', smart_count: errors.length - 1)\n            parts.push t 'failed to upload'\n            parts.push ': '\n            parts.push \"#{errors.pop().get 'name'}\"\n            parts.push \", #{error.get 'name'}\" for error in errors\n\n        return parts.join ' '\n\n    resetCollection: ->\n        @collection.reset()\n\n    uploadCount: (e) ->\n        if @collection.length\n            @$el.slideDown easing: 'linear'\n            $('#content').animate 'margin-top': 108,\n                easing: 'linear'\n\n        @render() if @completed and not @collection.completed\n        @counter.text @collection.length\n        @counterDone.text @collection.loaded\n\n    afterRender: ->\n        unless @collection.length\n            @$el.hide()\n            $('#content').css 'margin-top': 56\n        else\n            $('#content').css 'margin-top': 108\n\n        @$el.removeClass 'success danger warning'\n        @counter = @$ '.counter'\n        @counterDone = @$ '.counter-done'\n        @progressbar = @$ '.progress-bar-info'\n        @progressbarContent = @$ '.progress-bar-content'\n        @dismiss = @$('#dismiss').hide()\n        if @collection.completed then @complete()\n\n","ProgressBar = require '../widgets/progressbar'\n\nBaseView = require '../lib/base_view'\nmodule.exports = class UploadedFileView extends BaseView\n\n    className: 'upload-progress-item'\n\n    initialize: (options) ->\n        super options\n\n        @isDone = false\n        @listenTo @model, 'sync', =>\n            @isDone = true\n            @render()\n\n    template: ->\n        content = $ \"\"\"\n            <div class=\"progress-name\">\n                <span class=\"name\">#{@model.get('name')}</span>\n            </div>\n        \"\"\"\n        if @model.error\n            content.append \"\"\"\n            <span class=\"error\"> : #{@model.error}</span>\n            \"\"\"\n        else if @isDone or @model.isUploaded\n            content.append \"\"\"\n            <span class=\"success\">#{t 'upload success'}</span>\n            \"\"\"\n        else\n            content.append new ProgressBar(model: @model).render().$el\n\n        return content\n\n        destroy: ->\n            @stopListening @model\n            super()","BaseView = require '../lib/base_view'\n\nENTER_KEY = 13\nARROW_UP_KEY = 38\nARROW_DOWN_KEY = 40\n\nmodule.exports = class Autocomplete extends BaseView\n\n    className: 'autocomplete'\n    tagName: 'ul'\n\n    events: ->\n        'click li': 'onClick'\n\n    onInputKeyDown: (e) =>\n        if e.keyCode in [ARROW_UP_KEY, ARROW_DOWN_KEY]\n            delta = e.keyCode - 39 # delta will be +/- 1\n            @select @selectedIndex + delta\n            e.preventDefault()\n            e.stopPropagation()\n\n    onClick: (e) ->\n        @input.val e.target.dataset.value\n\n        # pretend we press enter\n        event = $.Event 'keydown'\n        event.keyCode = ENTER_KEY\n        @input.trigger event\n        e.preventDefault()\n        e.stopPropagation()\n        @unbindCancel = true\n\n        @input.parents('.folder-row').addClass 'pseudohover'\n        @input.focus()\n\n\n    initialize: (options = {}) ->\n\n        # maximum number of tags to display in the list\n        @limit = options.limit or 10\n\n        @tags = window.tags.map (value, idx) ->\n            el = document.createElement 'li'\n            el.textContent = value\n            el.dataset.value = value\n            el.dataset.index = idx\n            lc = value.toLowerCase()\n            return {value, el, lc}\n\n    position: ->\n        pos = @input.offset()\n        pos.top += @input.height() + 2\n        pos.width = @input.width() + 2\n        @$el.appendTo($('body')).css(pos).show()\n\n\n    refresh: (search, existings) ->\n        search = @input.val()\n        selected = @visible?[@selectedIndex]\n        existings ?= []\n\n        for tag in @tags\n            tag.el.classList.remove 'selected'\n\n        @visible = @tags.filter (tag, index) =>\n            return (tag.value not in existings) and tag.lc? and \\\n            ~tag.lc.indexOf(search.toLowerCase()) and \\\n            index < @limit\n\n        if selected and selected in @visible\n            @selectedIndex = @visible.indexOf selected\n        else\n            @selectedIndex = -1\n\n        @$el.empty().append _.pluck @visible, 'el'\n\n        # styles the list when it's empty\n        @$el.toggleClass 'empty', @visible.length is 0\n\n    select: (index) ->\n\n        for tag in @tags\n            tag.el.classList.remove 'selected'\n\n        index = (index + @visible.length) % @visible.length\n\n        @selectedIndex = index\n        visibleElement = @visible[@selectedIndex]\n        if visibleElement?\n            visibleElement.el.classList.add 'selected'\n            @input.val visibleElement.value\n\n    bind: ($target) ->\n        return if $target is @$target\n        @unbind() if @$target\n        @$target = $target\n        @input = @$target.find 'input'\n        @position()\n\n        @input.on 'keydown', @onInputKeyDown\n        @input.on 'blur', @delayedUnbind\n        @selectedIndex = -1\n\n    delayedUnbind: =>\n        @unbindCancel = false\n        clearTimeout @delayedUnbindTimeout if @delayedUnbindTimeout\n        @delayedUnbindTimeout = setTimeout @unbind, 100\n\n    unbind: =>\n        return if @unbindCancel or not @input\n        @input.off 'keydown', @onInputKeyDown\n        @input.off 'blur', @delayedUnbind\n        @input.parents('.folder-row').removeClass 'pseudohover'\n        @input.val ''\n        @$target = null\n        @$el.hide()\n        @$el.detach()\n        @selectedIndex = -1\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class ProgressbarView extends BaseView\n\n    className: 'progressview'\n    template: require '../views/templates/progressbar'\n    value: 0\n\n    initialize: ->\n        @listenTo @model, 'progress', @update\n        @listenTo @model, 'sync', @destroy\n\n        @value = @getProgression @model.loaded, @model.total\n\n    update: (e) ->\n        @value = @getProgression e.loaded, e.total\n        @$('.progress-bar').text(@value + '%').width @value + '%'\n\n    getProgression: (loaded, total) ->\n        return parseInt(loaded / total * 100)\n\n    getRenderData: ->\n        value: @value\n        name: @model.get 'name'\n","BaseView = require '../lib/base_view'\nAutocomplete = require './autocomplete'\n\nmodule.exports = class TagsView extends BaseView\n\n    events: ->\n        'click .tag': 'tagClicked'\n        'click .tag .deleter': 'deleteTag'\n        'focus input': 'onFocus'\n        'keydown input': 'onKeyDown'\n        'keyup input': 'refreshAutocomplete'\n\n    template: -> \"\"\"\n        <input type=\"text\" placeholder=\"#{t('tag')}\">\n    \"\"\"\n\n    initialize: ->\n        tags = @model.get('tags')\n        tags ?= []\n        @tags = []\n        @tags.push tag for tag in tags when tag?\n        @listenTo @model, 'change:tags', =>\n            @tags = @model.get('tags')\n            @refresh()\n\n    onFocus: (e) ->\n        TagsView.autocomplete.bind this.$el\n        TagsView.autocomplete.refresh '', @tags\n        if @input.val() is ''\n            TagsView.autocomplete.$el.hide()\n        else\n            TagsView.autocomplete.$el.show()\n\n    onKeyDown: (e) =>\n\n        val = @input.val()\n\n        if val is '' and e.keyCode is 8 #BACKSPACE\n            @setTags @tags[0..-2] # remove last tag\n            @refresh()\n            TagsView.autocomplete.refresh('', @tags)\n            TagsView.autocomplete.position()\n            e.preventDefault()\n            e.stopPropagation()\n            return\n\n        # COMMA, SPACE, TAB, ENTER\n        if val and e.keyCode in [188, 32, 9, 13]\n            @tags ?= []\n            @tags.push val unless val in @tags\n            @setTags @tags\n            @input.val ''\n            @refresh()\n            TagsView.autocomplete.refresh('', @tags)\n            TagsView.autocomplete.position()\n            e.preventDefault()\n            e.stopPropagation()\n            return\n\n        if e.keyCode in [188, 32, 9, 13]\n            e.preventDefault()\n            e.stopPropagation()\n            return\n\n        #UP, DOWN\n        if e.keyCode in [40, 38]\n            return true\n\n        if val and e.keyCode isnt 8\n            @refreshAutocomplete()\n            return true\n\n    refreshAutocomplete: (e) =>\n        if @input.val() isnt ''\n            TagsView.autocomplete.$el.show()\n\n        return if e?.keyCode in [40, 38, 8]\n        TagsView.autocomplete.refresh @input.val(), @tags\n\n    tagClicked: (e) =>\n        tag = e.target.dataset.value\n        # simulate search\n        $(\"#search-box\").val(\"tag:#{tag}\").trigger 'keyup'\n\n\n    setTags: (newTags) =>\n        @tags = newTags\n        @tags ?= []\n        @refresh()\n        clearTimeout @saveLater\n        @saveLater = setTimeout =>\n            @model.save tags: @tags\n        , 1000 # 3s\n\n    deleteTag: (e) =>\n        tag = e.target.parentNode.dataset.value\n        @setTags _.without @tags, tag\n        e.stopPropagation()\n        e.preventDefault()\n\n    afterRender: ->\n        @refresh()\n        @tags = @model.get('tags')\n        @input = @$('input')\n\n    refresh: =>\n        @$('.tag').remove()\n        html = (\"\"\"\n                <li class=\"tag\" data-value=\"#{tag}\">\n                    #{tag}\n                    <span class=\"deleter\"> &times; </span>\n                </li>\n            \"\"\" for tag in @tags or []).join ''\n        @$el.prepend html\n\nTagsView.autocomplete = new Autocomplete(id: 'tagsAutocomplete')\nTagsView.autocomplete.render()\n"]}